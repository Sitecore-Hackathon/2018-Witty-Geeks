----item----
version: 1
id: {CD6E97D6-3082-4F88-A060-94BA166D8826}
database: master
path: /sitecore/media library/Themes/Hackathon/Witty Geeks/wgtheme/scripts/component-carousel
parent: {D8A405D0-5129-4EFF-BFB5-0F58C7832872}
name: component-carousel
master: {00000000-0000-0000-0000-000000000000}
template: {962B53C4-F93B-4DF9-9821-415C867B8903}
templatekey: File
created: 20180303T053359Z

----field----
field: {40E50ED9-BA07-4702-992E-A912738D32DC}
name: Blob
key: blob
content-length: 97380

LyoqDQogKiBYQUNvbnRleHQNCiAqDQogKiBYQS5jb21wb25lbnQuY2Fyb3VzZWxzIG1vZHVsZS4N
CiAqDQogKiBFeHBvc2VzIHJlZ2lzdGVyKHNlbGVjdG9yLCBvcHRpb25zKSBtZXRob2QsIHdoaWNo
IGluaXRpYWxpemVzIENhcm91c2VsDQogKiBmb3IgZWFjaCBlbGVtZW50cyB0aGF0IG1hdGNoIHRo
ZSBwcm92aWRlZCBzZWxlY3Rvciwgd2l0aCBnaXZlbiBvcHRpb25zLg0KICogRWxlbWVudCB1c2Vk
IGFzIGEgY2Fyb3VzZWwgbXVzdCBjb250YWluIGEgPHVsIGNsYXNzPSJzbGlkZXMiPiB0YWcuDQog
KiBUaGF0IHRhZyBoYXZlIHRvIGJlIGZpbGxlZCB3aXRoIDxsaT4gZWxlbWVudHMuIEVhY2ggPGxp
PiBlbGVtZW50IHdpbGwgYmUgY29uc2lkZXJlZCBhcyBhIHNsaWRlLg0KICogRm9yIG1vcmUgZGV0
YWlscyByZWFkIHRoZSBkb2N1bWVudGF0aW9uIG9mIGEgcmVnaXN0ZXIoc2VsZWN0b3IsIG9wdGlv
bnMpIG1ldGhvZC4NCiAqDQogKiBAcmVxdWlyZXMgalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2
MS40LjQgb3IgaGlnaGVyDQogKi8NCi8qIGdsb2JhbCBIYW1tZXI6dHJ1ZSAqLw0KWEEuY29tcG9u
ZW50LmNhcm91c2VscyA9IChmdW5jdGlvbigkKSB7DQogICAgdmFyIHB1YiA9IHt9LA0KICAgICAg
ICBOYXZpZ2F0aW9uQnVpbGRlciA9IG51bGwsDQogICAgICAgIFNsaWRlckluaXRpYWxpemVyID0g
bnVsbDsNCg0KICAgIC8qKg0KICAgICAqIFRpbWVyIGNsYXNzIHNhdmVzIHRpbWUgc3RhbXAgYW5k
IGNvdW50cyB0aW1lIGRpZmZlcmVuY2UgYmV0d2Vlbg0KICAgICAqIGN1cnJlbnQgdGltZSAodXBk
YXRlKCkgbWV0aG9kKSBhbmQgc2F2ZWQgdGltZSBzdGFtcC4NCiAgICAgKiBAY29uc3RydWN0b3IN
CiAgICAgKi8NCiAgICBmdW5jdGlvbiBUaW1lcigpIHsNCiAgICAgICAgLyoqDQogICAgICAgICAq
IFRpbWUgZGlmZmVyZW5jZSBiZXR3ZWVuIGxhc3QgdXBkYXRlKCkgY2FsbCBhbmQgbGFzdCBzZXQo
KSBjYWxsDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgVGltZXINCiAgICAgICAgICov
DQogICAgICAgIHRoaXMuZWxhcHNlZCA9IDA7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBUaW1l
IHN0YW1wDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgVGltZXINCiAgICAgICAgICov
DQogICAgICAgIHRoaXMuc3RhbXAgPSBudWxsOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBD
b3VudHMgdGltZSBkaWZmZXJlbmNlIGJldHdlZW4gY3VycmVudCB0aW1lIGFuZCBzYXZlZCB0aW1l
IHN0YW1wDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVyDQogICAgICovDQogICAgVGltZXIu
cHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBpZiAodGhpcy5zdGFtcCAh
PT0gbnVsbCkgew0KICAgICAgICAgICAgdGhpcy5lbGFwc2VkICs9IHRoaXMubmV3U3RhbXAoKSAt
IHRoaXMuc3RhbXA7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLyoqDQogICAgICogIFNhdmVz
IG5ldyB0aW1lIHN0YW1wDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVyDQogICAgICovDQog
ICAgVGltZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB0aGlzLnN0YW1w
ID0gdGhpcy5uZXdTdGFtcCgpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiAgQ291bnRzIHRp
bWUgZGlmZmVyZW5jZSBiZXR3ZWVuIGN1cnJlbnQgdGltZSBhbmQgc2F2ZWQgdGltZSBzdGFtcA0K
ICAgICAqDQogICAgICogQG1lbWJlciBUaW1lcg0KICAgICAqIEByZXR1cm4gc3RhbXAgb2YgYSBj
dXJyZW50IHRpbWUNCiAgICAgKiBAdHlwZSBOdW1iZXINCiAgICAgKi8NCiAgICBUaW1lci5wcm90
b3R5cGUubmV3U3RhbXAgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCku
dmFsdWVPZigpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiAgUmVzZXRzIGVsYXBzZWQgdGlt
ZS4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgVGltZXINCiAgICAgKi8NCiAgICBUaW1lci5wcm90
b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5lbGFwc2VkID0gMDsNCiAg
ICB9Ow0KICAgIC8qKg0KICAgICAqIEVuZCBvZiBUaW1lciBjbGFzcw0KICAgICAqLw0KDQogICAg
LyoqDQogICAgICogVGltZUluZGljYXRvciBjbGFzcyBleHRlbmRzIFRpbWVyIGNsYXNzDQogICAg
ICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtPYmplY3R9ICQgICAgIGEgalF1ZXJ5IG9i
amVjdA0KICAgICAqIEBwYXJhbSB7WEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3
cy5WaWV3fSB2aWV3ICBhIHRpbWUgaW5kaWNhdG9yIHZpZXcuDQogICAgICogQHBhcmFtIHtOdW1i
ZXJ9IHRpbWVvdXQgICBhIHZpZXcgdGltZW91dA0KICAgICAqIEBiYXNlIFRpbWVyDQogICAgICov
DQogICAgZnVuY3Rpb24gVGltZUluZGljYXRvcigkLCB2aWV3LCB0aW1lb3V0KSB7DQogICAgICAg
IC8qKg0KICAgICAgICAgKiBBIHRpbWUgaW5kaWNhdG9yIHZpZXcuDQogICAgICAgICAqDQogICAg
ICAgICAqIEBtZW1iZXIgVGltZXJJbmRpY2F0b3INCiAgICAgICAgICovDQogICAgICAgIHRoaXMu
dmlldyA9IHZpZXc7DQoNCiAgICAgICAgdGhpcy52aWV3LmluaXQodGltZW91dCk7DQogICAgfQ0K
ICAgIFRpbWVJbmRpY2F0b3IucHJvdG90eXBlID0gbmV3IFRpbWVyKCk7DQogICAgVGltZUluZGlj
YXRvci5jb25zdHJ1Y3RvciA9IFRpbWVyOw0KDQogICAgLyoqDQogICAgICogUGxheXMgdGhlIGF0
dGFjaGVkIHZpZXcuDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVySW5kaWNhdG9yDQogICAg
ICovDQogICAgVGltZUluZGljYXRvci5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKCkgew0KICAg
ICAgICB0aGlzLnZpZXcucGxheSgpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBQYXVzZXMg
dGhlIGF0dGFjaGVkIHZpZXcuDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVySW5kaWNhdG9y
DQogICAgICovDQogICAgVGltZUluZGljYXRvci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigp
IHsNCiAgICAgICAgdGhpcy52aWV3LnBhdXNlKCk7DQogICAgfTsNCg0KICAgIC8qKg0KICAgICAq
IFJlc2V0cyBlbGFwc2VkIHRpbWUgYW5kIHJlc2V0cyB0aGUgYXR0YWNoZWQgdmlldy4NCiAgICAg
Kg0KICAgICAqIEBtZW1iZXIgVGltZXJJbmRpY2F0b3INCiAgICAgKi8NCiAgICBUaW1lSW5kaWNh
dG9yLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBUaW1lci5wcm90b3R5
cGUucmVzZXQuY2FsbCh0aGlzKTsNCiAgICAgICAgdGhpcy52aWV3LnJlc2V0KCk7DQogICAgfTsN
Cg0KICAgIC8qKg0KICAgICAqIENvdW50cyB0aW1lIGRpZmZlcmVuY2UgYmV0d2VlbiBjdXJyZW50
IHRpbWUgYW5kIHNhdmVkIHRpbWUgc3RhbXAuDQogICAgICogYW5kIHVwZGF0ZXMgdGhlIGF0dGFj
aGVkIHZpZXcNCiAgICAgKg0KICAgICAqIEBtZW1iZXIgVGltZXJJbmRpY2F0b3INCiAgICAgKi8N
CiAgICBUaW1lSW5kaWNhdG9yLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHsNCiAgICAg
ICAgVGltZXIucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpOw0KICAgICAgICB0aGlzLnZpZXcu
dXBkYXRlKHRoaXMuZWxhcHNlZCk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBlbmQgb2YgVGlt
ZUluZGljYXRvciBjbGFzcw0KICAgICAqLw0KDQogICAgLyoqDQogICAgICogTmF2aWdhdGlvbkJ1
aWxkZXIgb2JqZWN0IGNyZWF0ZXMgbmF2aWdhdGlvbiBpdGVtcw0KICAgICAqLw0KICAgIE5hdmln
YXRpb25CdWlsZGVyID0gKGZ1bmN0aW9uKCQpIHsNCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlSXRl
bShzZXR0aW5ncykgew0KICAgICAgICAgICAgdmFyIHRleHQgPSBzZXR0aW5ncy50ZXh0LA0KICAg
ICAgICAgICAgICAgICRuYXZJdGVtID0gbnVsbDsNCg0KICAgICAgICAgICAgc2V0dGluZ3MudGV4
dCA9ICcnOw0KICAgICAgICAgICAgc2V0dGluZ3MuaHJlZiA9ICcjJzsNCg0KICAgICAgICAgICAg
JG5hdkl0ZW0gPSAkKCc8YT4nLCBzZXR0aW5ncyk7DQogICAgICAgICAgICAkKCc8c3Bhbj4nLCB7
DQogICAgICAgICAgICAgICAgJ3RleHQnOiB0ZXh0DQogICAgICAgICAgICB9KS5hcHBlbmRUbygk
bmF2SXRlbSk7DQoNCiAgICAgICAgICAgIHJldHVybiAkbmF2SXRlbTsNCiAgICAgICAgfQ0KDQog
ICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIFJldHVybnMg
dGhlIGVsZW1lbnQocykgdGhhdCBtYXRjaChlcykgdGhlIHByb3ZpZGVkIHNlbGVjdG9yIG9yIG51
bGwNCiAgICAgICAgICAgICAqDQogICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0
b3IgYSBzZWxlY3RvciB1c2VkIGZvciBzZWFyY2hpbmcNCiAgICAgICAgICAgICAqIEByZXR1cm4g
YSBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgZWxlbWVudChzKSB0aGF0IG1hdGNoKGVzKSB0aGUg
cHJvdmlkZWQgc2VsZWN0b3Igb3IgbnVsbCBpZiBubyBlbGVtZW50IG1hdGNoDQogICAgICAgICAg
ICAgKiBAdHlwZSBPYmplY3QNCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgZ2V0RWxlbWVu
dDogZnVuY3Rpb24oc2VsZWN0b3IpIHsNCiAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAk
KHNlbGVjdG9yKTsNCg0KICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudC5sZW5ndGggPT09IDAp
IHsNCiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQgPSBudWxsOw0KICAgICAgICAgICAgICAg
IH0NCg0KICAgICAgICAgICAgICAgIHJldHVybiAkZWxlbWVudDsNCiAgICAgICAgICAgIH0sDQog
ICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIENyZWF0ZXMgbmF2aWdhdGlvbiBpdGVtcyBh
bmQgYXBwZW5kcyB0aGVtIHRvICRjb250YWluZXIuDQogICAgICAgICAgICAgKg0KICAgICAgICAg
ICAgICogQHBhcmFtIHtPYmplY3R9ICRjb250YWluZXIgICBuYXZpZ2F0aW9uIGl0ZW1zIGNvbnRh
aW5lciAoalF1ZXJ5IG9iamVjdCkNCiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYWJl
bCAgIG5hdmlnYXRpb24gaXRlbXMgbGFiZWwgdGVtcGxhdGUNCiAgICAgICAgICAgICAqIEBwYXJh
bSB7TnVtYmVyfSBjb3VudCAgICBudW1iZXIgb2YgbmF2aWdhdGlvbiBpdGVtcyB0byBjcmVhdGUN
CiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgY3JlYXRlSXRlbXM6IGZ1bmN0aW9uKCRjb250
YWluZXIsIGxhYmVsLCBjb3VudCkgew0KICAgICAgICAgICAgICAgIHZhciBpLA0KICAgICAgICAg
ICAgICAgICAgICBwYXR0ZXJuID0gLyNce2luZGV4XH0vZywNCiAgICAgICAgICAgICAgICAgICAg
c2V0dGluZ3M7DQoNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykg
ew0KICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncyA9IHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgICd0ZXh0JzogbGFiZWwucmVwbGFjZShwYXR0ZXJuLCBpICsgMSkNCiAgICAgICAgICAgICAg
ICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlSXRlbShzZXR0aW5ncykuYXBwZW5k
VG8oJGNvbnRhaW5lcik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAg
ICAgICAgIC8qKg0KICAgICAgICAgICAgICogQ3JlYXRlcyBvciBzZWxlY3RzICdwcmV2aW91cycv
J25leHQnIG5hdmlnYXRpb24gaXRlbS4NCiAgICAgICAgICAgICAqIE1vZGUgb2YgYWN0aW9uIGRl
cGVuZHMgb24gc2V0dGluZ3Mgb2JqZWN0Og0KICAgICAgICAgICAgICogdmFyIHNldHRpbmdzID0g
ew0KICAgICAgICAgICAgICogICAgIGlzQ29udGFpbmVyOiBCb29sZWFuIHZhbHVlLA0KICAgICAg
ICAgICAgICogICAgIGxhYmVsOiBTdHJpbmcgdmFsdWUsDQogICAgICAgICAgICAgKiAgICAgc2Vs
ZWN0b3I6IFN0cmluZyB2YWx1ZSwNCiAgICAgICAgICAgICAqICAgICBtZXRob2Q6IFN0cmluZyB2
YWx1ZQ0KICAgICAgICAgICAgICogfTsNCiAgICAgICAgICAgICAqDQogICAgICAgICAgICAgKiBJ
ZiBzZXR0aW5ncy5zZWxlY3RvciA9PT0gbnVsbCBvciBpZiBzZXR0aW5ncy5zZWxlY3RvciAhPT0g
bnVsbCBhbmQgc2V0dGluZ3MuaXNDb250YWluZXIgPT0gdHJ1ZQ0KICAgICAgICAgICAgICogbmF2
aWdhdGlvbiBpdGVtIGlzIGNyZWF0ZWQgYW5kIGF0dGFjaGVkIHRvICRlbGVtZW50LmZpcnN0KCkg
KHVzaW5nIHNldHRpbmdzLm1ldGhvZCkuDQogICAgICAgICAgICAgKiBJZiBzZXR0aW5ncy5zZWxl
Y3RvciAhPT0gbnVsbCBhbmQgc2V0dGluZ3MuaXNDb250YWluZXIgPT0gZmFsc2UNCiAgICAgICAg
ICAgICAqICRlbGVtZW50LmZpcnN0KCkgaXMgc2VsZWN0ZWQgYXMgbmF2aWdhdGlvbiBpdGVtDQog
ICAgICAgICAgICAgKg0KICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzIHNl
dHRpbmdzIG9mIG5hdmlnYXRpb24gaXRlbQ0KICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9
IGl0ZW1TZXR0aW5ncyAgIGh0bWwgYXR0cmlidXRlcyBvZiBuYXZpZ2F0aW9uIGl0ZW0NCiAgICAg
ICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkZWxlbWVudCAgICBuYXZpZ2F0aW9uIGl0ZW1zIGNv
bnRhaW5lciAoalF1ZXJ5IG9iamVjdCkNCiAgICAgICAgICAgICAqIEByZXR1cm4gVGhlICdwcmV2
Jy8nbmV4dCcgbmF2aWdhdGlvbiBpdGVtDQogICAgICAgICAgICAgKiBAdHlwZSBPYmplY3QNCiAg
ICAgICAgICAgICAqLw0KICAgICAgICAgICAgY3JlYXRlUHJldk5leHRJdGVtOiBmdW5jdGlvbihz
ZXR0aW5ncywgaXRlbVNldHRpbmdzLCAkZWxlbWVudCkgew0KICAgICAgICAgICAgICAgIHZhciAk
aXRlbSA9IG51bGwsDQogICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0b3JFeGlzdHMgPSBzZXR0
aW5ncy5zZWxlY3RvciAhPT0gbnVsbDsNCg0KDQogICAgICAgICAgICAgICAgaWYgKGlzU2VsZWN0
b3JFeGlzdHMpIHsNCiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQgPSB0aGlzLmdldEVsZW1l
bnQoc2V0dGluZ3Muc2VsZWN0b3IpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAg
ICAgIGlmICgkZWxlbWVudCAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoc2V0
dGluZ3MuaXNDb250YWluZXIgfHwgIWlzU2VsZWN0b3JFeGlzdHMpIHsNCiAgICAgICAgICAgICAg
ICAgICAgICAgICRpdGVtID0gY3JlYXRlSXRlbSgkLmV4dGVuZCh7fSwgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICd0ZXh0Jzogc2V0dGluZ3MubGFiZWwNCiAgICAgICAgICAgICAgICAg
ICAgICAgIH0sIGl0ZW1TZXR0aW5ncykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgKCRlbGVt
ZW50LmZpcnN0KCkpW3NldHRpbmdzLm1ldGhvZF0oJGl0ZW0pOw0KICAgICAgICAgICAgICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0gPSAkZWxlbWVudC5maXJz
dCgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAg
ICAgICAgICAgcmV0dXJuICRpdGVtOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0o
JCkpOw0KICAgIC8qKg0KICAgICAqIGVuZCBvZiBOYXZpZ2F0aW9uQnVpbGRlciBvYmplY3QNCiAg
ICAgKi8NCg0KICAgIC8qKg0KICAgICAqIE5hdmlnYXRpb24gY2xhc3MgaG9sZHMgbmF2aWdhdGlv
biBpdGVtcy4NCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5jdGlvbiBOYXZp
Z2F0aW9uKCQsICR3cmFwcGVyLCBvcHRpb25zKSB7DQogICAgICAgIHZhciBkZWZhdWx0cyA9IHsN
CiAgICAgICAgICAgICAgICAnaXNFbmFibGVkJzogdHJ1ZSwNCiAgICAgICAgICAgICAgICAnaGFz
UHJldk5leHRJdGVtcyc6IHRydWUsDQogICAgICAgICAgICAgICAgJ2l0ZW0nOiB7DQogICAgICAg
ICAgICAgICAgICAgICdsYWJlbCc6ICcje2luZGV4fScsDQogICAgICAgICAgICAgICAgICAgICdz
ZWxlY3Rvcic6IG51bGwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICdwcmV2
SXRlbSc6IHsNCiAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJzogJzwnLA0KICAgICAgICAgICAg
ICAgICAgICAnc2VsZWN0b3InOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAnaXNDb250YWlu
ZXInOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgJ25leHRJdGVt
Jzogew0KICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiAnPicsDQogICAgICAgICAgICAgICAg
ICAgICdzZWxlY3Rvcic6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICdpc0NvbnRhaW5lcic6
IGZhbHNlDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAnc2xpZGVzQ291bnQn
OiAwDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgc2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVl
LCB7fSwgZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBqUXVl
cnkgb2JqZWN0DQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgTmF2aWdhdGlvbg0KICAg
ICAgICAgKi8NCiAgICAgICAgdGhpcy4kID0gJDsNCiAgICAgICAgLyoqDQogICAgICAgICAqIE5h
dmlnYXRpb24gaXRlbXMgKG9uZSBmb3IgZWFjaCBzbGlkZSBpZiBuYXZpZ2F0aW9uIGlzIGVuYWJs
ZWQpLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIE5hdmlnYXRpb24NCiAgICAgICAg
ICovDQogICAgICAgIHRoaXMuJGl0ZW1zID0gJCgpOw0KICAgICAgICAvKioNCiAgICAgICAgICog
TmF2aWdhdGlvbiAnbmV4dCcgaXRlbSAoaWYgcHJldi9uZXh0IGl0ZW1zIGFyZSBlbmFibGVkKS4N
CiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBOYXZpZ2F0aW9uDQogICAgICAgICAqLw0K
ICAgICAgICB0aGlzLiRuZXh0SXRlbSA9ICQoKTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIE5h
dmlnYXRpb24gJ3ByZXZpb3VzJyBpdGVtIChpZiBwcmV2L25leHQgaXRlbXMgYXJlIGVuYWJsZWQp
Lg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIE5hdmlnYXRpb24NCiAgICAgICAgICov
DQogICAgICAgIHRoaXMuJHByZXZJdGVtID0gJCgpOw0KICAgICAgICAvKioNCiAgICAgICAgICog
U2VsZWN0ZWQgaXRlbSAob25lIGZyb20gdGhpcy4kaXRlbXMgb3IgbnVsbCkuDQogICAgICAgICAq
DQogICAgICAgICAqIEBtZW1iZXIgTmF2aWdhdGlvbg0KICAgICAgICAgKi8NCiAgICAgICAgdGhp
cy4kc2VsZWN0ZWRJdGVtID0gbnVsbDsNCg0KICAgICAgICAvL2luaXRpYWxpemF0aW9uDQogICAg
ICAgIGlmIChzZXR0aW5ncy5pc0VuYWJsZWQpIHsNCiAgICAgICAgICAgIHZhciBzZWxmID0gdGhp
czsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAg
c2VsZi5wcmVwYXJlSXRlbXMoc2V0dGluZ3MuaXRlbSwgc2V0dGluZ3Muc2xpZGVzQ291bnQsICR3
cmFwcGVyKTsNCiAgICAgICAgICAgICAgICAvL3NlbGVjdCBmaXJzdCBpdGVtIG9uIGluaXQNCiAg
ICAgICAgICAgICAgICBzZWxmLnNlbGVjdEl0ZW0oMCkNCiAgICAgICAgICAgIH0sIDEwMDApOw0K
DQogICAgICAgICAgICAkd3JhcHBlci5maW5kKCcubmF2JykudHJpZ2dlcignbmF2aWdhdGlvbi1j
cmVhdGVkJywgdGhpcyk7DQoNCg0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog
Q1NTIGNsYXNzbSB3aGljaCB3aWxsIGJlIHVzZWQgZm9yIG1hcmsgc2VsZWN0ZWQgaXRlbQ0KICAg
ICAqDQogICAgICogQG1lbWJlciBOYXZpZ2F0aW9uDQogICAgICovDQogICAgTmF2aWdhdGlvbi5w
cm90b3R5cGUuc2VsZWN0ZWRJdGVtQ2xhc3MgPSAnYWN0aXZlJzsNCg0KICAgIC8qKg0KICAgICAq
IE1hcmsgbmF2aWdhdGlvbiBpdGVtIHdpdGggZ2l2ZW4gaW5kZXggYXMgc2VsZWN0ZWQuDQogICAg
ICoNCiAgICAgKiBAbWVtYmVyIE5hdmlnYXRpb24NCiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5k
ZXggICAgIGluZGV4IG9mIG5hdmlnYXRpb24gaXRlbQ0KICAgICAqLw0KICAgIE5hdmlnYXRpb24u
cHJvdG90eXBlLnNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAoaW5kZXgpIHsNCiAgICAgICAgdmFyIGNv
bXBvbmVudFJvb3Q7DQogICAgICAgIGlmICh0aGlzLiRzZWxlY3RlZEl0ZW0gIT09IG51bGwpIHsN
CiAgICAgICAgICAgIHRoaXMuJHNlbGVjdGVkSXRlbS5yZW1vdmVDbGFzcyh0aGlzLnNlbGVjdGVk
SXRlbUNsYXNzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuJHNlbGVjdGVkSXRlbSA9IHRo
aXMuJGl0ZW1zLmVxKGluZGV4KS5hZGRDbGFzcyh0aGlzLnNlbGVjdGVkSXRlbUNsYXNzKTsNCiAg
ICAgICAgaWYgKHRoaXMuJHNlbGVjdGVkSXRlbS5sZW5ndGgpIHsNCiAgICAgICAgICAgIGNvbXBv
bmVudFJvb3QgPSB0aGlzLiRzZWxlY3RlZEl0ZW0uY2xvc2VzdCgnLmNvbXBvbmVudC5jYXJvdXNl
bCcpOw0KICAgICAgICAgICAgdXBkYXRlUXVlcnlQYXJhbShjb21wb25lbnRSb290LmF0dHIoJ2lk
JykgfHwgImNhcm91c2VsIiwgaW5kZXgpOw0KICAgICAgICB9DQoNCiAgICB9Ow0KDQogICAgLyoq
DQogICAgICogQ3JlYXRlcyBvciBzZWxlY3RzIG5hdmlnYXRpb24gaXRlbXMgY29udGFpbmVyIGFu
ZCBmaWxscyBpdCB3aXRoIG5hdmlnYXRpb24gaXRlbXMuDQogICAgICogSWYgbmF2aWdhdGlvbiBp
dGVtcyBjb250YWluZXIgaXMgbm90IGVtcHR5LCBjaGlsZCBlbGVtZW50cyBhcmUgYWRvcHRlZCBh
cyBuYXZpZ2F0aW9uIGl0ZW1zLg0KICAgICAqIE1vZGUgb2YgYWN0aW9uIGRlcGVuZHMgb24gc2V0
dGluZ3Mgb2JqZWN0Og0KICAgICAqIHZhciBzZXR0aW5ncyA9IHsNCiAgICAgKiAgICAgJ2xhYmVs
JzogJyN7aW5kZXh9JywNCiAgICAgKiAgICAgJ3NlbGVjdG9yJzogbnVsbA0KICAgICAqIH07DQog
ICAgICogSWYgc2V0dGluZ3Muc2VsZWN0b3IgPT09IG51bGwgbmF2aWdhdGlvbiBpdGVtIGNvbnRh
aW5lciBpcyBjcmVhdGVkLg0KICAgICAqIElmIHNldHRpbmdzLnNlbGVjdG9yICE9PSBudWxsIGVs
ZW1lbnQgdGhhdCBtYXRjaCBzZXR0aW5ncy5zZWxlY3RvciBpcyBhZGFwdGVkIGFzIG5hdmlnYWdh
dGlvbiBpdGVtcyBjb250YWluZXIuDQogICAgICoNCiAgICAgKiBAbWVtYmVyIE5hdmlnYXRpb24N
CiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3Mgc2V0dGluZ3Mgb2YgbmF2aWdhdGlvbiBp
dGVtcw0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCAgIG51bWJlciBvZiBuYXZpZ2F0aW9u
IGl0ZW1zDQogICAgICogQHBhcmFtIHtPYmplY3R9ICR3cmFwcGVyICAgIHdyYXBwZXIgb2YgbmF2
aWdhdGlvbiBpdGVtcyBjb250YWluZXIgKGpRdWVyeSBvYmplY3QpDQogICAgICogQHJldHVybiBU
aGUgY29udGFpbmVyIGZpbGxlZCB3aXRoIG5hdmlnYXRpb24gaXRlbXMuDQogICAgICogQHR5cGUg
T2JqZWN0DQogICAgICovDQogICAgTmF2aWdhdGlvbi5wcm90b3R5cGUucHJlcGFyZUl0ZW1zID0g
ZnVuY3Rpb24oc2V0dGluZ3MsIGNvdW50LCAkd3JhcHBlcikgew0KICAgICAgICB2YXIgJGNvbnRh
aW5lciA9IG51bGw7DQoNCiAgICAgICAgaWYgKHNldHRpbmdzLnNlbGVjdG9yICE9PSBudWxsKSB7
DQogICAgICAgICAgICAkY29udGFpbmVyID0gTmF2aWdhdGlvbkJ1aWxkZXIuZ2V0RWxlbWVudChz
ZXR0aW5ncy5zZWxlY3Rvcik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkY29udGFp
bmVyID0gJCgnPGRpdi8+Jywgew0KICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYXYnDQogICAg
ICAgICAgICB9KTsNCiAgICAgICAgICAgICRjb250YWluZXIuYXBwZW5kVG8oJHdyYXBwZXIpOw0K
ICAgICAgICB9DQoNCiAgICAgICAgaWYgKCRjb250YWluZXIgIT09IG51bGwpIHsNCiAgICAgICAg
ICAgIGlmICgkY29udGFpbmVyLmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAg
ICAgICAgTmF2aWdhdGlvbkJ1aWxkZXIuY3JlYXRlSXRlbXMoJGNvbnRhaW5lciwgc2V0dGluZ3Mu
bGFiZWwsIGNvdW50KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJGl0ZW1zID0g
JGNvbnRhaW5lci5jaGlsZHJlbigpLnNsaWNlKDAsIGNvdW50KTsNCiAgICAgICAgfQ0KDQogICAg
ICAgIHJldHVybiAkY29udGFpbmVyOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBDcmVhdGVz
IG9yIHNlbGVjdHMgbmF2aWdhdGlvbiAncHJldmlvdXMnIGFuZCAnbmV4dCcgbmF2aWdhdGlvbiBp
dGVtcyAoQHNlZSBOYXZpZ2F0aW9uQnVpbGRlci5jcmVhdGVQcmV2TmV4dEl0ZW0oKSkuDQogICAg
ICogSWYgbmF2aWdhdGlvbiBpdGVtcyBjb250YWluZXIgaXMgbm90IGVtcHR5LCBjaGlsZCBlbGVt
ZW50cyBhcmUgYWRvcHRlZCBhcyBuYXZpZ2F0aW9uIGl0ZW1zLg0KICAgICAqDQogICAgICogQG1l
bWJlciBOYXZpZ2F0aW9uDQogICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzIHNldHRpbmdz
IG9mIG5hdmlnYXRpb24NCiAgICAgKiBAcGFyYW0ge09iamVjdH0gJGNvbnRhaW5lciAgICBuYXZp
Z2F0aW9uIGl0ZW1zIGNvbnRhaW5lciAoalF1ZXJ5IG9iamVjdCkNCiAgICAgKi8NCiAgICBOYXZp
Z2F0aW9uLnByb3RvdHlwZS5wcmVwYXJlUHJldk5leHRJdGVtcyA9IGZ1bmN0aW9uKHNldHRpbmdz
LCAkY29udGFpbmVyKSB7DQogICAgICAgIHZhciAkaXRlbTsNCg0KICAgICAgICBzZXR0aW5ncy5w
cmV2SXRlbS5tZXRob2QgPSAncHJlcGVuZCc7DQogICAgICAgICRpdGVtID0gTmF2aWdhdGlvbkJ1
aWxkZXIuY3JlYXRlUHJldk5leHRJdGVtKHNldHRpbmdzLnByZXZJdGVtLCB7DQogICAgICAgICAg
ICAnY2xhc3MnOiAncHJldicNCiAgICAgICAgfSwgJGNvbnRhaW5lcik7DQogICAgICAgIHRoaXMu
JHByZXZJdGVtID0gKCRpdGVtID09PSBudWxsKSA/IHRoaXMuJHByZXZJdGVtIDogJGl0ZW07DQoN
CiAgICAgICAgc2V0dGluZ3MubmV4dEl0ZW0ubWV0aG9kID0gJ2FwcGVuZCc7DQogICAgICAgICRp
dGVtID0gTmF2aWdhdGlvbkJ1aWxkZXIuY3JlYXRlUHJldk5leHRJdGVtKHNldHRpbmdzLm5leHRJ
dGVtLCB7DQogICAgICAgICAgICAnY2xhc3MnOiAnbmV4dCcNCiAgICAgICAgfSwgJGNvbnRhaW5l
cik7DQogICAgICAgIHRoaXMuJG5leHRJdGVtID0gKCRpdGVtID09PSBudWxsKSA/IHRoaXMuJG5l
eHRJdGVtIDogJGl0ZW07DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBlbmQgb2YgTmF2aWdhdGlv
biBjbGFzcw0KICAgICAqLw0KDQogICAgLyoqDQogICAgICogU2xpZGVyQ29udGV4dCBjbGFzcyBp
cyBiaW5kZWQgdG8gYSBTbGlkZXIgY2xhc3MgaW5zdGFuY2UNCiAgICAgKiBhbmQgaG9sZHMgaXRz
IHByb3BlcnRpZXMuDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICovDQogICAgZnVuY3Rpb24g
U2xpZGVyQ29udGV4dCgpIHsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEZsYWcsIHdoaWNoIGRl
dGVybWluZXMgaWYgc2xpZGUgY2FuIG9yIGNhbiBub3QgYmUgY2hhbmdlZCAoZm9yIHVzZXIgcmVx
dWVzdCkNCiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAg
ICAgICAqLw0KICAgICAgICB0aGlzLmNhbkNoYW5nZVNsaWRlID0gdHJ1ZTsNCiAgICAgICAgLyoq
DQogICAgICAgICAqIERlZmF1bHQgU2xpZGVyIHNldHRpbmcgb2JqZWN0IChAc2VlIFNsaWRlcikN
CiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAgICAgICAq
Lw0KICAgICAgICB0aGlzLmRlZmF1bHRzID0gbnVsbDsNCiAgICAgICAgLyoqDQogICAgICAgICAq
IE5hdmlnYXRpb24gb2JqZWN0IChAc2VlIE5hdmlnYXRpb24pDQogICAgICAgICAqDQogICAgICAg
ICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5uYXZp
Z2F0aW9uID0gbnVsbDsNCiAgICAgICAgLyoqDQogICAgICAgICAqIFNsaWRlciBvYmplY3QsIHdo
aWNoIHRoaXMgY29udGV4dCBpcyBhdHRhY2VoZCB0by4NCiAgICAgICAgICoNCiAgICAgICAgICog
QG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAgICAgICAqLw0KICAgICAgICB0aGlzLm93bmVyID0g
bnVsbDsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEZsYWcsIHdoaWNoIGRldGVybWluZXMgaWYg
Y2hhbmdlIG9mIGEgc2xpZGUgY2FuIG9yIGNhbiBub3QgYmUgc2NoZWR1bGVkDQogICAgICAgICAq
DQogICAgICAgICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAg
dGhpcy5wcmV2ZW50U2NoZWR1bGluZyA9IGZhbHNlOw0KICAgICAgICAvKioNCiAgICAgICAgICog
U2xpZGVyIHNldHRpbmcgb2JqZWN0DQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgU2xp
ZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IG51bGw7DQog
ICAgICAgIC8qKg0KICAgICAgICAgKiBJbnN0YW5jZSBvZiBUaW1lciBjbGFzcyAoQHNlZSBUaW1l
ciksIHdoaWNoIGlzIHVzZWQgdG8gc3RvcmUgaG93IG11Y2gNCiAgICAgICAgICogdGltZSBpcyBs
ZWZ0IHRvIGNoYW5nZSB0aGUgc2xpZGUNCiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBT
bGlkZXJDb250ZXh0DQogICAgICAgICAqLw0KICAgICAgICB0aGlzLnNsaWRlVGltZXIgPSBuZXcg
VGltZXIoKTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEluc3RhbmNlIG9mIFRpbWVJbmRpY2F0
b3IgY2xhc3MgKEBzZWUgVGltZUluZGljYXRvcikNCiAgICAgICAgICoNCiAgICAgICAgICogQG1l
bWJlciBTbGlkZXJDb250ZXh0DQogICAgICAgICAqLw0KICAgICAgICB0aGlzLnRpbWVJbmRpY2F0
b3IgPSBudWxsOw0KICAgICAgICAvKioNCiAgICAgICAgICogVGltZXJzIGFycmF5Lg0KICAgICAg
ICAgKg0KICAgICAgICAgKiBAbWVtYmVyIFNsaWRlckNvbnRleHQNCiAgICAgICAgICovDQogICAg
ICAgIHRoaXMudGltZXJzID0gW107DQogICAgICAgIC8qKg0KICAgICAgICAgKiBMYXN0IHRpbWVv
dXQgaWRlbnRpZmllci4NCiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBTbGlkZXJDb250
ZXh0DQogICAgICAgICAqLw0KICAgICAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7DQogICAgICAg
IC8qKg0KICAgICAgICAgKiBUcmFuc2l0aW9uIChAc2VlIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMu
VHJhbnNpdGlvbnMuVHJhbnNpdGlvbikgdXNlZCB3aGlsZSBjaGFuZ2luZyBzbGlkZXMNCiAgICAg
ICAgICoNCiAgICAgICAgICogQG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAgICAgICAqLw0KICAg
ICAgICB0aGlzLnRyYW5zaXRpb24gPSBudWxsOw0KICAgICAgICAvKioNCiAgICAgICAgICogVHJh
bnNpdGlvbiBzZXR0aW5ncyBvYmplY3QgKEBzZWUgWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFu
c2l0aW9ucy5UcmFuc2l0aW9uU2V0dGluZ3MpDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1i
ZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy50cmFuc2l0aW9uU2V0
dGluZ3MgPSBuZXcgWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFuc2l0aW9ucy5UcmFuc2l0aW9u
U2V0dGluZ3MoKTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIGpRdWVyeSBvYmplY3Qgd2hpY2gg
Y29udGFpbnMgYWxsIHNsaWRlcw0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIFNsaWRl
ckNvbnRleHQNCiAgICAgICAgICovDQogICAgICAgIHRoaXMuJHNsaWRlcyA9IG51bGw7DQogICAg
ICAgIC8qKg0KICAgICAgICAgKiBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgZWxlbWVudCB0aGF0
IHdyYXBwcyBzbGlkZXMNCiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBTbGlkZXJDb250
ZXh0DQogICAgICAgICAqLw0KICAgICAgICB0aGlzLiR3cmFwcGVyID0gbnVsbDsNCiAgICAgICAg
LyoqDQogICAgICAgICAqIFJlZmVyZW5jZSB0byBtZXRob2QsIHdoaWNoIHNob3VsZCBjaGFuZ2Ug
Y3VycmVudCBzbGlkZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIFNsaWRlckNvbnRl
eHQNCiAgICAgICAgICovDQogICAgICAgIHRoaXMuY2hhbmdlQ3VycmVudFNsaWRlID0gbnVsbDsN
CiAgICAgICAgLyoqDQogICAgICAgICAqIFJlZmVyZW5jZSB0byBtZXRob2QsIHdoaWNoIHNob3Vs
ZCByZXR1cm4galF1ZXJ5IG9iamVjdCB3aXRoIGN1cnJlbnQgc2xpZGUNCiAgICAgICAgICoNCiAg
ICAgICAgICogQG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAgICAgICAqLw0KICAgICAgICB0aGlz
LmdldEN1cnJlbnRTbGlkZSA9IG51bGw7DQoNCiAgICAgICAgdGhpcy50aW1lcnMucHVzaCh0aGlz
LnNsaWRlVGltZXIpOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBlbmQgb2YgU2xpZGVyQ29udGV4
dCBjbGFzcw0KICAgICAqLw0KDQogICAgLyoqDQogICAgICogU2xpZGVyIGNsYXNzIG1hbmFnZXMg
Y2hhbmdpbmcgb2Ygc2xpZGVzLg0KICAgICAqDQogICAgICogT3B0aW9ucyBvYmplY3Q6DQogICAg
ICogew0KICAgICAqICAgICAnbmF2aWdhdGlvbic6IE9iamVjdCB2YWx1ZSwgLy9uYXZpZ2F0aW9u
IHNldHRpbmdzIG9iamVjdA0KICAgICAqICAgICAndGltZW91dCc6IE51bWJlciB2YWx1ZSwgLy90
aW1lIGJldHdlZW4gc2xpZGVzIGNoYW5naW5nDQogICAgICogICAgICd0cmFuc2l0aW9uJzogU3Ry
aW5nIHZhbHVlLCAvL25hbWUgb2YgdHJhbnNpdGlvbiBjbGFzcyAoQHNlZSBYQS5jb21wb25lbnQu
Y2Fyb3VzZWxzLlRyYW5zaXRpb25zLlRyYW5zaXRpb24pDQogICAgICogICAgICdpc1BhdXNlRW5h
YmxlZCc6IEJvb2xlYW4gdmFsdWUsIC8vZmxhZywgd2hpY2ggZGV0ZXJtaW5lcyBpZiBwYXVzZSBm
ZWF0dXJlIGlzIGVuYWJsZWQNCiAgICAgKiAgICAgJ3RpbWVJbmRpY2F0b3InOiB7DQogICAgICog
ICAgICAgICAnaXNFbmFibGVkJzogQm9vbGVhbiB2YWx1ZSwgLy9mbGFnLCB3aGljaCBkZXRlcm1p
bmVzIGlmIHRpbWUgaW5kaWNhdG9yIGlzIGVuYWJsZWQNCiAgICAgKiAgICAgICAgICdzZWxlY3Rv
cic6IFN0cmluZyB2YWx1ZSwgLy9zZWxlY3RvciBvZiB0aW1lIGluZGljYXRvciBodG1sIGVsZW1l
bnQNCiAgICAgKiAgICAgICAgICd2aWV3JzogU3RyaW5nIHZhbHVlLCAvL25hbWUgb2YgdmlldyBj
bGFzcyAoQHNlZSBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLkluZGljYXRvclZpZXdzLlZpZXcNCiAg
ICAgKiAgICAgICAgICdvcHRpb25zJzogT2JqZWN0IHZhbHVlIC8vb2JqZWN0IHdpdGggb3B0aW9u
cywgd2hpY2ggd2lsbCBiZSBwYXNzZWQgdG8gYSB0aW1lIGluZGljYXRvciB2aWV3DQogICAgICog
ICAgIH0NCiAgICAgKiB9DQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtPYmpl
Y3R9ICQgICAgIHRoZSBqUXVlcnkgb2JqZWN0DQogICAgICogQHBhcmFtIHtTbGlkZXJDb250ZXh0
fSBjb250ZXh0ICAgIGluc3RhbmNlIG9mIFNsaWRlckNvbnRleHQgY2xhc3M7IG11c3QgYmUgc2Vw
YXJhdGUgZm9yIGVhY2ggaW5zdGFuY2UgKEBzZWUgU2xpZGVyQ29udGV4dCkNCiAgICAgKiBAcGFy
YW0ge09iamVjdH0gb3B0aW9ucyAgICBTbGlkZXIgb3B0aW9ucyBvYmplY3QNCiAgICAgKi8NCiAg
ICBmdW5jdGlvbiBTbGlkZXIoJCwgY29udGV4dCwgb3B0aW9ucykgew0KICAgICAgICB2YXIgZGVm
YXVsdHMgPSB7DQogICAgICAgICAgICAnbmF2aWdhdGlvbic6IHt9LA0KICAgICAgICAgICAgJ3Rp
bWVvdXQnOiAxMDAwMCwNCiAgICAgICAgICAgICd0cmFuc2l0aW9uJzogJ0Jhc2ljVHJhbnNpdGlv
bicsDQogICAgICAgICAgICAnaXNQYXVzZUVuYWJsZWQnOiB0cnVlLA0KICAgICAgICAgICAgJ3Rp
bWVJbmRpY2F0b3InOiB7DQogICAgICAgICAgICAgICAgJ2lzRW5hYmxlZCc6IGZhbHNlLA0KICAg
ICAgICAgICAgICAgICdzZWxlY3Rvcic6IG51bGwsDQogICAgICAgICAgICAgICAgJ3ZpZXcnOiAn
VmlldycsDQogICAgICAgICAgICAgICAgJ29wdGlvbnMnOiB7fQ0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9Ow0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBJbnN0YW5jZSBvZiBTbGlkZXJDb250
ZXh0IGNsYXNzIChAc2VlIFNsaWRlckNvbnRleHQpDQogICAgICAgICAqDQogICAgICAgICAqIEBt
ZW1iZXIgTmF2aWdhdGlvbg0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29u
dGV4dDsNCg0KICAgICAgICBjb250ZXh0Lm93bmVyID0gdGhpczsNCiAgICAgICAgY29udGV4dC5k
ZWZhdWx0cyA9IGRlZmF1bHRzOw0KICAgICAgICBjb250ZXh0LnNldHRpbmdzID0gJC5leHRlbmQo
dHJ1ZSwge30sIGRlZmF1bHRzLCBvcHRpb25zKTsNCiAgICAgICAgY29udGV4dC50cmFuc2l0aW9u
U2V0dGluZ3MuJHNsaWRlcyA9IGNvbnRleHQuJHNsaWRlczsNCiAgICB9DQoNCiAgICAvKioNCiAg
ICAgKiBFeGVjdXRlcyBtZXRob2Qgd2l0aCBnaXZlbiBtZXRob2ROYW1lIG9uIGVhY2ggVGltZXIg
aW4gY29udGV4dC50aW1lcnMgKEBzZWUgVGltZXIpDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFNs
aWRlcg0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2ROYW1lICAgbmFtZSBvZiBhIG1ldGhv
ZCwgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCBvbiB0aW1lcnMNCiAgICAgKiBAcGFyYW0ge1NsaWRl
ckNvbnRleHR9IGNvbnRleHQgICAgY3VycmVudCBjb250ZXh0DQogICAgICovDQogICAgU2xpZGVy
LnByb3RvdHlwZS5leGVjdXRlT25UaW1lcnMgPSBmdW5jdGlvbihtZXRob2ROYW1lLCBjb250ZXh0
KSB7DQogICAgICAgIHZhciBpID0gbnVsbCwNCiAgICAgICAgICAgIHRpbWVyID0gbnVsbCwNCiAg
ICAgICAgICAgIHRpbWVycyA9IGNvbnRleHQudGltZXJzOw0KDQogICAgICAgIGZvciAoaSA9IDA7
IGkgPCB0aW1lcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHRpbWVyID0gdGltZXJzW2ld
Ow0KICAgICAgICAgICAgaWYgKHR5cGVvZih0aW1lclttZXRob2ROYW1lXSkgPT09ICdmdW5jdGlv
bicpIHsNCiAgICAgICAgICAgICAgICB0aW1lclttZXRob2ROYW1lXSgpOw0KICAgICAgICAgICAg
fQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8qKg0KICAgICAqIERlc2NoZWR1bGVzIGNoYW5n
ZSBvZiBhIHNsaWRlLCBieSBjbGVhcmluZyB0aW1lb3V0IHByZXZpb3VzbHkgc2V0IGJ5IHNldFRp
ZW1vdXQoKSBmdW5jdGlvbi4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgU2xpZGVyDQogICAgICog
QHBhcmFtIHtTbGlkZXJDb250ZXh0fSBjb250ZXh0ICAgIGN1cnJlbnQgY29udGV4dA0KICAgICAq
Lw0KICAgIFNsaWRlci5wcm90b3R5cGUuZGVzY2hlZHVsZVNsaWRlID0gZnVuY3Rpb24oY29udGV4
dCkgew0KICAgICAgICBpZiAoY29udGV4dC50aW1lb3V0SWQgIT09IG51bGwpIHsNCiAgICAgICAg
ICAgIGNsZWFyVGltZW91dChjb250ZXh0LnRpbWVvdXRJZCk7DQogICAgICAgICAgICBjb250ZXh0
LnRpbWVvdXRJZCA9IG51bGw7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLyoqDQogICAgICog
U2NoZWR1bGVzIGNoYW5nZSBvZiBhIHNsaWRlLCBieSBzZXR0aW5nIHRpbWVvdXQgKHVzaW5nIHNl
dFRpZW1vdXQoKSBmdW5jdGlvbikgaWYgY2FuLg0KICAgICAqIElmIGNhbid0LCB0cmllcyBhZ2Fp
biBhZnRlciBzaG9ydCBwZXJpb2Qgb2YgdGltZS4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgU2xp
ZGVyDQogICAgICogQHBhcmFtIHtTbGlkZXJDb250ZXh0fSBjb250ZXh0ICAgIGN1cnJlbnQgY29u
dGV4dA0KICAgICAqLw0KICAgIFNsaWRlci5wcm90b3R5cGUuc2NoZWR1bGVTbGlkZSA9IGZ1bmN0
aW9uKGNvbnRleHQpIHsNCiAgICAgICAgdmFyIG93bmVyID0gY29udGV4dC5vd25lcjsNCg0KICAg
ICAgICBvd25lci5kZXNjaGVkdWxlU2xpZGUoY29udGV4dCk7DQoNCiAgICAgICAgaWYgKCFjb250
ZXh0LnByZXZlbnRTY2hlZHVsaW5nICYmIGNvbnRleHQuJHNsaWRlcy5zaXplKCkgPiAxKSB7DQog
ICAgICAgICAgICBvd25lci5leGVjdXRlT25UaW1lcnMoJ3NldCcsIGNvbnRleHQpOw0KDQogICAg
ICAgICAgICBpZiAoY29udGV4dC5jYW5DaGFuZ2VTbGlkZSkgew0KICAgICAgICAgICAgICAgIGlm
IChjb250ZXh0LnRpbWVJbmRpY2F0b3IgIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAg
Y29udGV4dC50aW1lSW5kaWNhdG9yLnBsYXkoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgY29udGV4dC50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAg
ICAgICAgICAgICAgICAgICBvd25lci5jaGFuZ2VDdXJyZW50U2xpZGVCeSgxLCBjb250ZXh0KTsN
CiAgICAgICAgICAgICAgICB9LCBjb250ZXh0LnNldHRpbmdzLnRpbWVvdXQgLSBjb250ZXh0LnNs
aWRlVGltZXIuZWxhcHNlZCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg
IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgIG93bmVyLnNjaGVk
dWxlU2xpZGUoY29udGV4dCk7DQogICAgICAgICAgICAgICAgfSwgMTAwKTsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBDaGFuZ2VzIGN1cnJlbnQg
c2xpZGUsIGJ5IG9mZnNldCBwZXJmb3JtaW5nIGNvbnRleHQudHJhbnNpdGlvbg0KICAgICAqIEFu
eSBvZmZzZXQgdmFsdWUgaXMgc2F2ZSAoaWYgaXQgaXMgYW4gaW50ZWdlcikuDQogICAgICoNCiAg
ICAgKiBAbWVtYmVyIFNsaWRlcg0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgICAgdGhl
IG9mZnNldCB0byBhbiBpbmRleCBvZiBhIG5ldyBzbGlkZQ0KICAgICAqIEBwYXJhbSB7U2xpZGVy
Q29udGV4dH0gY29udGV4dCAgICBjdXJyZW50IGNvbnRleHQNCiAgICAgKi8NCiAgICBTbGlkZXIu
cHJvdG90eXBlLmNoYW5nZUN1cnJlbnRTbGlkZUJ5ID0gZnVuY3Rpb24ob2Zmc2V0LCBjb250ZXh0
KSB7DQogICAgICAgIHZhciBzZXR0aW5ncyA9IGNvbnRleHQudHJhbnNpdGlvblNldHRpbmdzLA0K
ICAgICAgICAgICAgJGN1cnJlbnRTbGlkZSA9IGNvbnRleHQuZ2V0Q3VycmVudFNsaWRlKCksDQog
ICAgICAgICAgICAkc2xpZGVzID0gY29udGV4dC4kc2xpZGVzOw0KDQogICAgICAgIGlmICgob2Zm
c2V0ICUgJHNsaWRlcy5zaXplKCkpICE9PSAwKSB7DQogICAgICAgICAgICBjb250ZXh0LmNhbkNo
YW5nZVNsaWRlID0gZmFsc2U7DQoNCiAgICAgICAgICAgIHNldHRpbmdzLm9mZnNldCA9IG9mZnNl
dDsNCiAgICAgICAgICAgIHNldHRpbmdzLiRjdXJyZW50U2xpZGUgPSAkY3VycmVudFNsaWRlOw0K
ICAgICAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZSA9ICRzbGlkZXMuZXEoKCRjdXJyZW50U2xp
ZGUuaW5kZXgoKSArIG9mZnNldCkgJSAkc2xpZGVzLnNpemUoKSk7DQoNCiAgICAgICAgICAgIGNv
bnRleHQuY2hhbmdlQ3VycmVudFNsaWRlKHNldHRpbmdzLiRuZXh0U2xpZGUpOw0KICAgICAgICAg
ICAgY29udGV4dC50cmFuc2l0aW9uLnBlcmZvcm0oY29udGV4dC50cmFuc2l0aW9uU2V0dGluZ3Mp
Ow0KICAgICAgICAgICAgY29udGV4dC5vd25lci5leGVjdXRlT25UaW1lcnMoJ3Jlc2V0JywgY29u
dGV4dCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIHZhciAkY2Fyb3VzZWwgPSAkKGNvbnRleHQu
JHdyYXBwZXIpLnBhcmVudHMoIi5jYXJvdXNlbCIpOw0KICAgICAgICAkY2Fyb3VzZWwudHJpZ2dl
cigic2xpZGUtY2hhbmdlZCIpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBTdGFydHMgYXV0
b21hdGljIHNsaWRlcyBjaGFuZ2luZw0KICAgICAqDQogICAgICogQG1lbWJlciBTbGlkZXINCiAg
ICAgKi8NCiAgICBTbGlkZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB0
aGlzLmV4ZWN1dGVPblRpbWVycygncmVzZXQnLCB0aGlzLmNvbnRleHQpOw0KICAgICAgICB0aGlz
LnNjaGVkdWxlU2xpZGUodGhpcy5jb250ZXh0KTsNCiAgICB9Ow0KDQogICAgLyoqDQogICAgICog
Q2FuY2VsIHRoZSBkZWZhdWx0IGFjdGlvbiBvZiBldmVudCBhbmQgY2hhbmdlcyBzbGlkZSBtYW51
YWxseS4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgU2xpZGVyDQogICAgICogQHBhcmFtIHtPYmpl
Y3R9IGV2ZW50ICAgICB0aGUgZXZlbnQNCiAgICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0ICAg
IHRoZSBvZmZzZXQgdG8gYW4gaW5kZXggb2YgYSBuZXcgc2xpZGUNCiAgICAgKiBAcGFyYW0ge1Ns
aWRlckNvbnRleHR9IGNvbnRleHQgICAgY3VycmVudCBjb250ZXh0DQogICAgICovDQogICAgU2xp
ZGVyLnByb3RvdHlwZS5vbkNoYW5nZUN1cnJlbnRTbGlkZSA9IGZ1bmN0aW9uKGV2ZW50LCBvZmZz
ZXQsIGNvbnRleHQpIHsNCiAgICAgICAgdmFyIG93bmVyID0gY29udGV4dC5vd25lcjsNCg0KICAg
ICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBpZiAoY29udGV4dC5jYW5DaGFu
Z2VTbGlkZSkgew0KICAgICAgICAgICAgb3duZXIuZGVzY2hlZHVsZVNsaWRlKGNvbnRleHQpOw0K
ICAgICAgICAgICAgb3duZXIuY2hhbmdlQ3VycmVudFNsaWRlQnkob2Zmc2V0LCBjb250ZXh0KTsN
CiAgICAgICAgfQ0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBTZWxlY3RzIG5hdmlnYXRpb24g
aXRlbSB3aXRoIGdpdmVuIGluZGV4Lg0KICAgICAqDQogICAgICogQG1lbWJlciBTbGlkZXINCiAg
ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggICAgIHRoZSBpbmRleCBvZiBuYXZpZ2F0aW9uIGl0
ZW0NCiAgICAgKi8NCiAgICBTbGlkZXIucHJvdG90eXBlLnNlbGVjdE5hdmlnYXRpb25JdGVtID0g
ZnVuY3Rpb24oaW5kZXgpIHsNCiAgICAgICAgdGhpcy5jb250ZXh0Lm5hdmlnYXRpb24uc2VsZWN0
SXRlbShpbmRleCk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBlbmQgb2YgU2xpZGVyIGNsYXNz
DQogICAgICovDQoNCiAgICAvKioNCiAgICAgKiBTbGlkZXJJbml0aWFsaXplciBvYmplY3Qgc2V0
IHVwIGluc3RhbmNlcyBvZiBTbGlkZXIgY2xhc3MNCiAgICAgKi8NCiAgICBTbGlkZXJJbml0aWFs
aXplciA9IChmdW5jdGlvbigkKSB7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBBdHRhY2hlcyBl
dmVudHMgdG8gbmF2aWdhdGlvbiBpdGVtcy4NCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFt
IHtTbGlkZXJDb250ZXh0fSBjb250ZXh0ICAgYSBjb250ZXh0IG9mIGEgU2xpZGVyIGNsYXNzIGlu
c3RhbmNlDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBhdHRhY2hOYXZpZ2F0aW9uRXZl
bnRzKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBvd25lciA9IGNvbnRleHQub3duZXIsDQog
ICAgICAgICAgICAgICAgJG5hdkxpbmtzID0gY29udGV4dC4kd3JhcHBlci5maW5kKCIubmF2IGEi
KSwNCiAgICAgICAgICAgICAgICAkcHJldkl0ZW1UeHQgPSBjb250ZXh0LiR3cmFwcGVyLmZpbmQo
Jy5wcmV2LXRleHQnKSwNCiAgICAgICAgICAgICAgICAkbmV4dEl0ZW1UeHQgPSBjb250ZXh0LiR3
cmFwcGVyLmZpbmQoJy5uZXh0LXRleHQnKTsNCg0KICAgICAgICAgICAgY29udGV4dC5uYXZpZ2F0
aW9uLiRpdGVtcy5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7DQogICAgICAgICAgICAgICAgdmFyICRz
bGlkZSA9IGNvbnRleHQuJHNsaWRlcy5lcShpbmRleCk7DQoNCiAgICAgICAgICAgICAgICAkKHRo
aXMpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgICAgIG93bmVyLm9u
Q2hhbmdlQ3VycmVudFNsaWRlKGV2ZW50LCAkc2xpZGUuaW5kZXgoKSAtIGNvbnRleHQuZ2V0Q3Vy
cmVudFNsaWRlKCkuaW5kZXgoKSwgY29udGV4dCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAg
ICAgICAgICB9KTsNCg0KICAgICAgICAgICAgJHByZXZJdGVtVHh0LmNsaWNrKGZ1bmN0aW9uKGV2
ZW50KSB7DQogICAgICAgICAgICAgICAgb3duZXIub25DaGFuZ2VDdXJyZW50U2xpZGUoZXZlbnQs
IC0xLCBjb250ZXh0KTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAkbmV4dEl0ZW1U
eHQuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgICAgICBvd25lci5vbkNoYW5n
ZUN1cnJlbnRTbGlkZShldmVudCwgMSwgY29udGV4dCk7DQogICAgICAgICAgICB9KTsNCg0KICAg
ICAgICAgICAgY29udGV4dC5uYXZpZ2F0aW9uLiRwcmV2SXRlbS5jbGljayhmdW5jdGlvbihldmVu
dCkgew0KICAgICAgICAgICAgICAgIG93bmVyLm9uQ2hhbmdlQ3VycmVudFNsaWRlKGV2ZW50LCAt
MSwgY29udGV4dCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29udGV4dC5uYXZp
Z2F0aW9uLiRuZXh0SXRlbS5jbGljayhmdW5jdGlvbihldmVudCkgew0KICAgICAgICAgICAgICAg
IG93bmVyLm9uQ2hhbmdlQ3VycmVudFNsaWRlKGV2ZW50LCAxLCBjb250ZXh0KTsNCiAgICAgICAg
ICAgIH0pOw0KDQogICAgICAgICAgICAkbmF2TGlua3Mub24oImtleWRvd24iLCBmdW5jdGlvbihl
dmVudCkgew0KICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkgew0KICAgICAg
ICAgICAgICAgICAgICBjYXNlIDM3Og0KICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIub25D
aGFuZ2VDdXJyZW50U2xpZGUoZXZlbnQsIC0xLCBjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgiLmFjdGl2ZSIpLmZvY3VzKCk7DQogICAgICAg
ICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOToNCiAg
ICAgICAgICAgICAgICAgICAgICAgIG93bmVyLm9uQ2hhbmdlQ3VycmVudFNsaWRlKGV2ZW50LCAx
LCBjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmlu
ZCgiLmFjdGl2ZSIpLmZvY3VzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8q
Kg0KICAgICAgICAgKiBBdHRhY2hlcyBwYXVzZSBldmVudCB0byBuYXZpZ2F0aW9uIHdyYXBwZXIu
DQogICAgICAgICAqDQogICAgICAgICAqIEBwYXJhbSB7U2xpZGVyQ29udGV4dH0gY29udGV4dCAg
IGEgY29udGV4dCBvZiBhIFNsaWRlciBjbGFzcyBpbnN0YW5jZQ0KICAgICAgICAgKi8NCiAgICAg
ICAgZnVuY3Rpb24gYXR0YWNoUGF1c2VFdmVudChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIg
b3duZXIgPSBjb250ZXh0Lm93bmVyLA0KICAgICAgICAgICAgICAgICRlbGVtZW50ID0gY29udGV4
dC4kd3JhcHBlciwNCiAgICAgICAgICAgICAgICAkbmF2TGlua3MgPSAkZWxlbWVudC5maW5kKCIu
bmF2IGEiKTsNCg0KICAgICAgICAgICAgdmFyIGNhbGxiYWNrTW91c2VlbnRlciA9IGZ1bmN0aW9u
KCkgew0KICAgICAgICAgICAgICAgIGNvbnRleHQucHJldmVudFNjaGVkdWxpbmcgPSB0cnVlOw0K
ICAgICAgICAgICAgICAgIG93bmVyLmRlc2NoZWR1bGVTbGlkZShjb250ZXh0KTsNCg0KICAgICAg
ICAgICAgICAgIG93bmVyLmV4ZWN1dGVPblRpbWVycygndXBkYXRlJywgY29udGV4dCk7DQogICAg
ICAgICAgICAgICAgaWYgKGNvbnRleHQudGltZUluZGljYXRvciAhPT0gbnVsbCkgew0KICAgICAg
ICAgICAgICAgICAgICBjb250ZXh0LnRpbWVJbmRpY2F0b3IucGF1c2UoKTsNCiAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRlbGVtZW50Lm1vdXNlZW50ZXIo
Y2FsbGJhY2tNb3VzZWVudGVyKTsNCiAgICAgICAgICAgICRuYXZMaW5rcy5vbigiZm9jdXMiLCBj
YWxsYmFja01vdXNlZW50ZXIpOw0KDQogICAgICAgICAgICB2YXIgY2FsbGJhY2tNb3VzZUxlYXZl
ID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgY29udGV4dC5wcmV2ZW50U2NoZWR1bGlu
ZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIG93bmVyLnNjaGVkdWxlU2xpZGUoY29udGV4dCk7
DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRlbGVtZW50Lm1vdXNlbGVhdmUoY2FsbGJh
Y2tNb3VzZUxlYXZlKTsNCiAgICAgICAgICAgICRuYXZMaW5rcy5vbigiYmx1ciIsIGNhbGxiYWNr
TW91c2VMZWF2ZSk7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogQ3JlYXRl
cyB0aW1lIGluZGljYXRvciB2aWV3DQogICAgICAgICAqDQogICAgICAgICAqIEBwYXJhbSB7U2xp
ZGVyQ29udGV4dH0gY29udGV4dCAgIGEgY29udGV4dCBvZiBhIFNsaWRlciBjbGFzcyBpbnN0YW5j
ZQ0KICAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlSW5kaWNhdG9yKGNvbnRleHQp
IHsNCiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGNvbnRleHQuc2V0dGluZ3MsDQogICAgICAg
ICAgICAgICAgdGltZUluZGljYXRvciA9IG51bGwsDQogICAgICAgICAgICAgICAgVmlld0NvbnN0
cnVjdG9yID0gWEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3c1tzZXR0aW5ncy50
aW1lSW5kaWNhdG9yLnZpZXddLA0KICAgICAgICAgICAgICAgIHZpZXcgPSBudWxsOw0KDQogICAg
ICAgICAgICBpZiAoVmlld0NvbnN0cnVjdG9yICE9PSBudWxsKSB7DQogICAgICAgICAgICAgICAg
dmlldyA9IG5ldyBWaWV3Q29uc3RydWN0b3Ioc2V0dGluZ3MudGltZUluZGljYXRvci5zZWxlY3Rv
ciwgc2V0dGluZ3MudGltZUluZGljYXRvci5vcHRpb25zKTsNCiAgICAgICAgICAgICAgICB0aW1l
SW5kaWNhdG9yID0gbmV3IFRpbWVJbmRpY2F0b3IoJCwgdmlldywgc2V0dGluZ3MudGltZW91dCk7
DQogICAgICAgICAgICAgICAgY29udGV4dC50aW1lSW5kaWNhdG9yID0gdGltZUluZGljYXRvcjsN
CiAgICAgICAgICAgICAgICBjb250ZXh0LnRpbWVycy5wdXNoKHRpbWVJbmRpY2F0b3IpOw0KICAg
ICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEF0dGFjaGVz
IGV2ZW50cyB0byBuYXZpZ2F0aW9uLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0ge1Ns
aWRlckNvbnRleHR9IGNvbnRleHQgICBhIGNvbnRleHQgb2YgYSBTbGlkZXIgY2xhc3MgaW5zdGFu
Y2UNCiAgICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVOYXZpZ2F0aW9uKGNv
bnRleHQpIHsNCiAgICAgICAgICAgIGNvbnRleHQuc2V0dGluZ3MubmF2aWdhdGlvbi5zbGlkZXND
b3VudCA9IGNvbnRleHQuJHNsaWRlcy5sZW5ndGg7DQogICAgICAgICAgICBjb250ZXh0Lm5hdmln
YXRpb24gPSBuZXcgTmF2aWdhdGlvbigkLCBjb250ZXh0LiR3cmFwcGVyLCBjb250ZXh0LnNldHRp
bmdzLm5hdmlnYXRpb24pOw0KDQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0K
ICAgICAgICAgICAgICAgIGF0dGFjaE5hdmlnYXRpb25FdmVudHMoY29udGV4dCk7DQogICAgICAg
ICAgICB9LCAxMDAwKTsNCg0KDQogICAgICAgICAgICBpZiAoY29udGV4dC5zZXR0aW5ncy5pc1Bh
dXNlRW5hYmxlZCkgew0KICAgICAgICAgICAgICAgIGF0dGFjaFBhdXNlRXZlbnQoY29udGV4dCk7
DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogSW5p
dGlhbGl6ZXMgdHJhbnNpdGlvbiBmb3IgYSBnaXZlbiBjb250ZXh0Lg0KICAgICAgICAgKg0KICAg
ICAgICAgKiBAcGFyYW0ge1NsaWRlckNvbnRleHR9IGNvbnRleHQgICBhIGNvbnRleHQgb2YgYSBT
bGlkZXIgY2xhc3MgaW5zdGFuY2UNCiAgICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIGluaXRp
YWxpemVUcmFuc2l0aW9uKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBUcmFuc2l0aW9uQ29u
c3RydWN0b3IgPSBudWxsLA0KICAgICAgICAgICAgICAgIG93bmVyID0gY29udGV4dC5vd25lcjsN
Cg0KICAgICAgICAgICAgY29udGV4dC50cmFuc2l0aW9uU2V0dGluZ3MuY2FsbGJhY2sgPSBmdW5j
dGlvbigpIHsNCiAgICAgICAgICAgICAgICBjb250ZXh0LmNhbkNoYW5nZVNsaWRlID0gdHJ1ZTsN
Cg0KICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnByZXZlbnRTY2hlZHVsaW5nKSB7DQogICAg
ICAgICAgICAgICAgICAgIG93bmVyLmV4ZWN1dGVPblRpbWVycygncmVzZXQnLCBjb250ZXh0KTsN
CiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBvd25lci5zY2hl
ZHVsZVNsaWRlKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoN
CiAgICAgICAgICAgIFRyYW5zaXRpb25Db25zdHJ1Y3RvciA9IFhBLmNvbXBvbmVudC5jYXJvdXNl
bHMuVHJhbnNpdGlvbnNbY29udGV4dC5zZXR0aW5ncy50cmFuc2l0aW9uXTsNCiAgICAgICAgICAg
IGlmICgoVHJhbnNpdGlvbkNvbnN0cnVjdG9yID09PSBudWxsKSB8fCAoVHJhbnNpdGlvbkNvbnN0
cnVjdG9yID09PSB1bmRlZmluZWQpKSB7DQogICAgICAgICAgICAgICAgVHJhbnNpdGlvbkNvbnN0
cnVjdG9yID0gWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFuc2l0aW9uc1tjb250ZXh0LmRlZmF1
bHRzLnRyYW5zaXRpb25dOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29udGV4dC50cmFu
c2l0aW9uID0gbmV3IFRyYW5zaXRpb25Db25zdHJ1Y3RvcigpOw0KICAgICAgICAgICAgY29udGV4
dC50cmFuc2l0aW9uLmluaXQoY29udGV4dC50cmFuc2l0aW9uU2V0dGluZ3MpOw0KICAgICAgICB9
DQoNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICogSW5p
dGlhbGl6ZXMgU2xpZGVyIG9iamVjdCB3aXRoIGEgZ2l2ZW4gY29udGV4dC4NCiAgICAgICAgICAg
ICAqDQogICAgICAgICAgICAgKiBAcGFyYW0ge1NsaWRlckNvbnRleHR9IGNvbnRleHQgICBhIGNv
bnRleHQgb2YgYSBTbGlkZXIgY2xhc3MgaW5zdGFuY2UNCiAgICAgICAgICAgICAqLw0KICAgICAg
ICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oY29udGV4dCkgew0KICAgICAgICAgICAgICAgIGlu
aXRpYWxpemVOYXZpZ2F0aW9uKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgIGluaXRpYWxpemVU
cmFuc2l0aW9uKGNvbnRleHQpOw0KDQogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc2V0dGlu
Z3MudGltZUluZGljYXRvci5pc0VuYWJsZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRl
SW5kaWNhdG9yKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAg
ICAgICAgfTsNCiAgICB9KCQpKTsNCiAgICAvKioNCiAgICAgKiBlbmQgb2YgU2xpZGVySW5pdGlh
bGl6ZXINCiAgICAgKi8NCg0KICAgIC8qKg0KICAgICAqIENhcm91c2VsIGNsYXNzIGRpc3BsYXlz
IG9uZSBzbGlkZSAoc29tZSBjb250ZW50KSBhdCB0aGUgdGltZS4NCiAgICAgKiBJdHMgYmVoYXZp
b3VyIGRlcGVuZHMgb24gc2V0dGluZ3MgKHBhc3NlZCB0byBpbml0KCkgbWV0aG9kKS4NCiAgICAg
KiBGb3IgbW9yZSBkZXRhaWxzIEBzZWUgU2xpZGVyLCBAc2VlIFNsaWRlckluaXRpYWxpemVyLCBA
c2VlIE5hdmlnYXRpb24sDQogICAgICogQHNlZSBOYXZpZ2F0aW9uQnVpbGRlciwgQHNlZSBYQS5j
b21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zLlRyYW5zaXRpb24sDQogICAgICogQHNlZSBY
QS5jb21wb25lbnQuY2Fyb3VzZWxzLkluZGljYXRvclZpZXdzLlZpZXcNCiAgICAgKg0KICAgICAq
IEBjb25zdHJ1Y3Rvcg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIENhcm91c2VsKCkgew0KICAgICAg
ICB2YXIgY29udGV4dCA9IHRoaXM7DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEluc3RhbmNl
IG9mIGEgU2xpZGVyIGNsYXNzIChAc2VlIFNsaWRlcikuDQogICAgICAgICAqDQogICAgICAgICAq
IEBtZW1iZXIgQ2Fyb3VzZWwNCiAgICAgICAgICovDQogICAgICAgIHRoaXMuc2xpZGVyID0gbnVs
bDsNCiAgICAgICAgLyoqDQogICAgICAgICAqIERpc3BsYXllZCBzbGlkZSAoalF1ZXJ5IG9iamVj
dCkuDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgQ2Fyb3VzZWwNCiAgICAgICAgICov
DQogICAgICAgIHRoaXMuJGN1cnJlbnRTbGlkZSA9IG51bGw7DQogICAgICAgIC8qKg0KICAgICAg
ICAgKiBBbGwgc2xpZGVzIChqUXVlcnkgb2JqZWN0KS4NCiAgICAgICAgICoNCiAgICAgICAgICog
QG1lbWJlciBDYXJvdXNlbA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy4kc2xpZGVzID0gbnVs
bDsNCg0KICAgICAgICAvKioNCiAgICAgICAgICogQ2hhbmdlcyBjdXJyZW50IHNsaWRlIHRvIGEg
JG5ld1NsaWRlLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIENhcm91c2VsDQogICAg
ICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkbmV3U2xpZGUgIHRoZSBuZXcgc2xpZGUgKGpRdWVyeSkg
b2JqZWN0Lg0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5jaGFuZ2VDdXJyZW50U2xpZGUgPSBm
dW5jdGlvbigkbmV3U2xpZGUpIHsNCiAgICAgICAgICAgIGNvbnRleHQuJGN1cnJlbnRTbGlkZSA9
ICRuZXdTbGlkZTsNCiAgICAgICAgICAgIGNvbnRleHQuc2xpZGVyLnNlbGVjdE5hdmlnYXRpb25J
dGVtKCRuZXdTbGlkZS5pbmRleCgpKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvKioNCiAgICAg
ICAgICogUmV0dXJucyBjdXJyZW50IHNsaWRlLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVt
YmVyIENhcm91c2VsDQogICAgICAgICAqIEByZXR1cm4gY3VycmVudCBzbGlkZSAoalF1ZXJ5KSBv
YmplY3QuDQogICAgICAgICAqIEB0eXBlIE9iamVjdA0KICAgICAgICAgKi8NCiAgICAgICAgdGhp
cy5nZXRDdXJyZW50U2xpZGUgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiBjb250
ZXh0LiRjdXJyZW50U2xpZGU7DQogICAgICAgIH07DQoNCiAgICAgICAgdGhpcy5kYXRhID0ge307
DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVzZXRzIHRoZSBjYXJvdXNlbC4NCiAgICAgKg0K
ICAgICAqIEBtZW1iZXIgQ2Fyb3VzZWwNCiAgICAgKi8NCiAgICBDYXJvdXNlbC5wcm90b3R5cGUu
cmVzZXQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy4kc2xpZGVzLmVhY2goZnVuY3Rpb24o
KSB7DQogICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAg
dGhpcy5jaGFuZ2VDdXJyZW50U2xpZGUodGhpcy4kc2xpZGVzLmZpcnN0KCkpOw0KICAgICAgICB0
aGlzLiRjdXJyZW50U2xpZGUuc2hvdygpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBJbml0
aWFsaXplcyB0aGUgY2Fyb3VzZWwuDQogICAgICogV3JhcHBzIGNhcm91c2VsIGNvbnRlbnQgd2l0
aCA8ZGl2IGNsYXNzPSJ3cmFwcGVyIiAvPiBlbGVtZW50LA0KICAgICAqIHNlbGVjdHMgc2xpZGVz
ICg8bGkgLz4gZWxlbWVudHMpIGZyb20gPHVsIGNsYXNzPSJzbGlkZXMiIC8+IGVsZW1lbnQsDQog
ICAgICogaW5pdGlhbGl6ZXMgU2xpZGVyIGNsYXNzIGluY3RhbmNlLCByZXNldHMgdGhlIGNhcm91
c2VsIGFuZCBzdGFydCBhdXRvbWF0aWMgc2xpZGVzIGNoYW5naW5nLg0KICAgICAqDQogICAgICog
QG1lbWJlciBDYXJvdXNlbA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkY29udGFpbmVyICAgICBq
UXVlcnkgb2JqZWN0IHdpdGggYSBtYWluIGh0bWwgZWxlbWVudCBvZiB0aGUgY2Fyb3VzZWwNCiAg
ICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAgICAgY2Fyb3VzZWwgb3B0aW9ucyBvYmplY3QN
CiAgICAgKi8NCiAgICBDYXJvdXNlbC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCRjb250YWlu
ZXIsIG9wdGlvbnMpIHsNCiAgICAgICAgdmFyICR3cmFwcGVyID0gJCgnPGRpdi8+Jywgew0KICAg
ICAgICAgICAgICAgICdjbGFzcyc6ICd3cmFwcGVyJw0KICAgICAgICAgICAgfSksDQogICAgICAg
ICAgICBzbGlkZXJDb250ZXh0ID0gbnVsbDsNCg0KICAgICAgICAkd3JhcHBlci5hcHBlbmQoJGNv
bnRhaW5lci5jaGlsZHJlbigpLmRldGFjaCgpKTsNCiAgICAgICAgJGNvbnRhaW5lci5hcHBlbmQo
JHdyYXBwZXIpOw0KICAgICAgICB0aGlzLiRzbGlkZXMgPSAkY29udGFpbmVyLmZpbmQoJy5zbGlk
ZXMgbGkuc2xpZGUnKTsNCg0KICAgICAgICBzbGlkZXJDb250ZXh0ID0gbmV3IFNsaWRlckNvbnRl
eHQoKTsNCiAgICAgICAgc2xpZGVyQ29udGV4dC5jaGFuZ2VDdXJyZW50U2xpZGUgPSB0aGlzLmNo
YW5nZUN1cnJlbnRTbGlkZTsNCiAgICAgICAgc2xpZGVyQ29udGV4dC5nZXRDdXJyZW50U2xpZGUg
PSB0aGlzLmdldEN1cnJlbnRTbGlkZTsNCiAgICAgICAgc2xpZGVyQ29udGV4dC4kc2xpZGVzID0g
dGhpcy4kc2xpZGVzOw0KICAgICAgICBzbGlkZXJDb250ZXh0LiR3cmFwcGVyID0gJHdyYXBwZXI7
DQoNCiAgICAgICAgdGhpcy5zbGlkZXIgPSBuZXcgU2xpZGVyKCQsIHNsaWRlckNvbnRleHQsIG9w
dGlvbnMpOw0KICAgICAgICBTbGlkZXJJbml0aWFsaXplci5pbml0aWFsaXplKHNsaWRlckNvbnRl
eHQpOw0KDQogICAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgICAgdGhpcy5zbGlkZXIucnVuKCk7
DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBlbmQgb2YgQ2Fyb3VzZWwgY2xhc3MNCiAgICAgKi8N
Cg0KICAgIC8qKg0KICAgICAqIFJlZ2lzdGVycyBlYWNoIGVsZW1lbnRzIHRoYXQgbWF0Y2ggdGhl
IHByb3ZpZGVkIHNlbGVjdG9yIGFzIGEgY2Fyb3VzZWwgd2l0aCBhIGdpdmVuIG9wdGlvbnMuDQog
ICAgICogQ2Fyb3VzZWwgb3B0aW9ucyBvYmplY3QgOg0KICAgICAqIHsNCiAgICAgKiAgICAgLy8N
CiAgICAgKiAgICAgLy8gbmF2aWdhdGlvbjogT2JqZWN0DQogICAgICogICAgIC8vDQogICAgICog
ICAgIC8vIFRoZSBuYXZpZ2F0aW9uIGNvbmZpZ3VyYXRpb24gb2JqZWN0Lg0KICAgICAqICAgICAv
Lw0KICAgICAqICAgICAnbmF2aWdhdGlvbic6IHsNCiAgICAgKiAgICAgICAgIC8vDQogICAgICog
ICAgICAgICAvL2lzRW5hYmxlZDogQm9vbGVhbg0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAg
ICAgICAgIC8vIFNldHMgd2hldGhlciB0aGUgbmF2aWdhdGlvbiBpcyBlbmFibGVkLg0KICAgICAq
ICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICdpc0VuYWJsZWQnOiB0cnVlLA0KICAgICAqICAg
ICAgICAgLy8NCiAgICAgKiAgICAgICAgIC8vIGhhc1ByZXZOZXh0SXRlbXM6IEJvb2xlYW4NCiAg
ICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyBTZXRzIHdoZXRoZXIgdGhlIG5hdmln
YXRpb24gaGFzIHByZXZpb3VzIGFuZCBuZXh0IGJ1dHRvbnMuDQogICAgICogICAgICAgICAvLw0K
ICAgICAqICAgICAgICAgJ2hhc1ByZXZOZXh0SXRlbXMnOiB0cnVlLA0KICAgICAqICAgICAgICAg
Ly8NCiAgICAgKiAgICAgICAgIC8vIGl0ZW06IE9iamVjdA0KICAgICAqICAgICAgICAgLy8NCiAg
ICAgKiAgICAgICAgIC8vIE5hdmlnYXRpb24gaXRlbSBjb25maWd1cmF0aW9uIG9iamVjdC4NCiAg
ICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAnaXRlbSc6IHsNCiAgICAgKiAgICAgICAg
ICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIGxhYmVsOiBTdHJpbmcNCiAgICAgKiAgICAg
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIExhYmVsIHRlbXBsYXRlOyBlYWNoICcj
e2luZGV4fScgc3RyaW5nIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIG51bWJlciBvZiBhIHNsaWRl
Lg0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgJ2xhYmVsJzogJyN7
aW5kZXh9JywNCiAgICAgKiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIHNl
bGVjdG9yOiBTdHJpbmcNCiAgICAgKiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAg
IC8vIE5hdmlnYXRpb24gaXRlbXMgY29udGFpbmVyIHNlbGVjdG9yOyBpZiBlcXVhbHMgbnVsbCwg
dGhlIGNvbnRhaW5lciB3aWxsIGJlIGdlbmVyYXRlZA0KICAgICAqICAgICAgICAgICAgIC8vICgn
ZGl2JyBlbGVtZW50IHdpdGggJ25hdicgY2xhc3MgYXR0cmlidXRlIGluc2lkZSB0aGUgY2Fyb3Vz
ZWwpLg0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgJ3NlbGVjdG9y
JzogbnVsbA0KICAgICAqICAgICAgICB9LA0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAgICAg
ICAgIC8vIHByZXZJdGVtOiBPYmplY3QNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAg
ICAvLyBOYXZpZ2F0aW9uICdwcmV2aW91cyBpdGVtJyBjb25maWd1cmF0aW9uIG9iamVjdC4NCiAg
ICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAncHJldkl0ZW0nOiB7DQogICAgICogICAg
ICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAvLyBsYWJlbDogU3RyaW5nDQogICAgICog
ICAgICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAvLyBUaGUgJ3ByZXZpb3VzIGl0ZW0n
IGxhYmVsLg0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgJ2xhYmVs
JzogJzwnLA0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgLy8gc2Vs
ZWN0b3I6IFN0cmluZw0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAg
Ly8gTmF2aWdhdGlvbiAncHJldmlvdXMgaXRlbScgc2VsZWN0b3I7IGlmIGVxdWFscyBudWxsLCB0
aGUgaXRlbSB3aWxsIGJlIGdlbmVyYXRlZA0KICAgICAqICAgICAgICAgICAgIC8vICgnYScgZWxl
bWVudCB3aXRoICdwcmV2JyBjbGFzcyBhdHRyaWJ1dGUgaW5zaWRlIHRoZSBuYXZpZ2F0aW9uIGNv
bnRhaW5lcikuDQogICAgICogICAgICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAnc2Vs
ZWN0b3InOiBudWxsLA0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAg
Ly8gaXNDb250YWluZXI6IEJvb2xlYW4NCiAgICAgKiAgICAgICAgICAgICAvLw0KICAgICAqICAg
ICAgICAgICAgIC8vIFNldHMgd2hldGhlciB0aGUgZWxlbWVudCBmb3VuZCBieSBzZWxlY3RvciBz
aG91bGQgYmUgdHJlYXRlZCBhcyBhIGNvbnRhaW5lciAoaWYgdHJ1ZSkNCiAgICAgKiAgICAgICAg
ICAgICAvLyBvciBzaG91bGQgYmUgYWRvcHRlZCBhcyBhICdwcmV2aW91cyBpdGVtJyAoaWYgZmFs
c2UpLiBJZiBzZWxlY3RvciBlcXVhbHMgbnVsbCB0aGlzIHByb3BlcnR5IGlzIG1lYW5pbmdsZXNz
Lg0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgJ2lzQ29udGFpbmVy
JzogZmFsc2UNCiAgICAgKiAgICAgICAgIH0sDQogICAgICogICAgICAgICAvLw0KICAgICAqICAg
ICAgICAgLy8gbmV4dEl0ZW06IE9iamVjdA0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAgICAg
ICAgIC8vIE5hdmlnYXRpb24gJ25leHQgaXRlbScgY29uZmlndXJhdGlvbiBvYmplY3QuDQogICAg
ICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgJ25leHRJdGVtJzogew0KICAgICAqICAgICAg
ICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgLy8gbGFiZWw6IFN0cmluZw0KICAgICAqICAg
ICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgLy8gVGhlICduZXh0IGl0ZW0nIGxhYmVs
Lg0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgJ2xhYmVsJzogJz4n
LA0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgLy8gc2VsZWN0b3I6
IFN0cmluZw0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgLy8gTmF2
aWdhdGlvbiAnbmV4dCBpdGVtJyBzZWxlY3RvcjsgaWYgZXF1YWxzIG51bGwsIHRoZSBpdGVtIHdp
bGwgYmUgZ2VuZXJhdGVkDQogICAgICogICAgICAgICAgICAgLy8gKCdhJyBlbGVtZW50IHdpdGgg
J25leHQnIGNsYXNzIGF0dHJpYnV0ZSBpbnNpZGUgdGhlIG5hdmlnYXRpb24gY29udGFpbmVyKS4N
CiAgICAgKiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgICdzZWxlY3Rvcic6IG51
bGwsDQogICAgICogICAgICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAvLyBpc0NvbnRh
aW5lcjogQm9vbGVhbg0KICAgICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAg
Ly8gU2V0cyB3aGV0aGVyIHRoZSBlbGVtZW50IGZvdW5kIGJ5IHNlbGVjdG9yIHNob3VsZCBiZSB0
cmVhdGVkIGFzIGEgY29udGFpbmVyIChpZiB0cnVlKQ0KICAgICAqICAgICAgICAgICAgIC8vIG9y
IHNob3VsZCBiZSBhZG9wdGVkIGFzIGEgJ25leHQgaXRlbScgKGlmIGZhbHNlKS4gSWYgc2VsZWN0
b3IgZXF1YWxzIG51bGwgdGhpcyBwcm9wZXJ0eSBpcyBtZWFuaW5nbGVzcy4NCiAgICAgKiAgICAg
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgICdpc0NvbnRhaW5lcic6IGZhbHNlDQogICAg
ICogICAgICAgICB9DQogICAgICogICAgIH0sDQogICAgICogICAgIC8vDQogICAgICogICAgIC8v
IHRpbWVvdXQ6IE51bWJlcg0KICAgICAqICAgICAvLw0KICAgICAqICAgICAvLyBUaGUgaW50ZXJ2
YWwgYmV0d2VlbiB0aGUgc2xpZGVzIGluIG1pbGlzZWNvbmRzLg0KICAgICAqICAgICAvLw0KICAg
ICAqICAgICAndGltZW91dCc6IDEwMDAwLA0KICAgICAqICAgICAvLw0KICAgICAqICAgICAvLyB0
cmFuc2l0aW9uOiBTdHJpbmcNCiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgLy8gTmFtZSBvZiB0
aGUgdHJhbnNpdGlvbiBjbGFzcywgd2hpY2ggd2lsbCBiZSB1c2VkLiBQb3NzaWJsZSB2YWx1ZXMg
YXJlOg0KICAgICAqICAgICAvLyAtIEJhc2ljVHJhbnNpdGlvbiAtIHdpdGhvdXQgYW55IGFuaW1h
dGlvbiwNCiAgICAgKiAgICAgLy8gLSBGYWRlSW5UcmFuc2l0aW9uIC0gbmV3IHNsaWRlIGZhZGVz
IGluLA0KICAgICAqICAgICAvLyAtIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbiAtIG5ldyBz
bGlkZSBtb3ZlcyBmcm9tIHJpZ2h0IChmcm9tIGxlZnQgaWYgdXNlciBzZWxlY3RzIHNsaWRlIHdp
dGggbG93ZXIgaWQgb3IgY2xpY2tzIG9uICdwcmV2aW91cyBpdGVtJyksDQogICAgICogICAgIC8v
IC0gU2xpZGVWZXJ0aWNhbGx5VHJhbnNpdGlvbiAtIG5ldyBzbGlkZSBtb3ZlcyBmcm9tIHRvcCAo
ZnJvbSBib3R0b20gaWYgdXNlciBzZWxlY3RzIHNsaWRlIHdpdGggbG93ZXIgaWQgb3IgY2xpY2tz
IG9uICdwcmV2aW91cyBpdGVtJyksDQogICAgICogICAgIC8vIC0gb3RoZXIgLSBpZiBpbXBsZW1l
bnRlZCAoZGVyaXZlZCBmcm9tIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuVHJhbnNpdGlvbnMuVHJh
bnNpdGlvbiBjbGFzcykgYW5kIGFkZGVkIHRvIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuVHJhbnNp
dGlvbnMgbW9kdWxlLg0KICAgICAqICAgICAvLw0KICAgICAqICAgICAndHJhbnNpdGlvbic6ICdC
YXNpY1RyYW5zaXRpb24nLA0KICAgICAqICAgICAvLw0KICAgICAqICAgICAvLyBpc1BhdXNlRW5h
YmxlZDogQm9vbGVhbg0KICAgICAqICAgICAvLw0KICAgICAqICAgICAvLyBTZXRzIHdoZXRoZXIg
dGhlIHBhdXNlIGZlYXR1cmUgaXMgZW5hYmxlZC4NCiAgICAgKiAgICAgLy8gUGF1c2UgZmVhdHVy
ZSBwYXVzZXMgY291bnRkb3duIG9mIGNoYW5naW5nIHNsaWRlcywgd2hlbiBtb3VzZSBpcyBpbiBh
IGNhcm91c2VsIGFyZWEuDQogICAgICogICAgIC8vDQogICAgICogICAgICdpc1BhdXNlRW5hYmxl
ZCc6IHRydWUsDQogICAgICogICAgIC8vDQogICAgICogICAgIC8vIHRpbWVJbmRpY2F0b3I6IE9i
amVjdA0KICAgICAqICAgICAvLw0KICAgICAqICAgICAvLyAnVGltZSBpbmRpY2F0b3InIGNvbmZp
Z3VyYXRpb24gb2JqZWN0Lg0KICAgICAqICAgICAvLw0KICAgICAqICAgICAndGltZUluZGljYXRv
cic6IHsNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyBpc0VuYWJsZWQ6IEJv
b2xlYW4NCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyBTZXRzIHdoZXRoZXIg
dGhlICd0aW1lIGluZGljYXRvcicgaXMgZW5hYmxlZC4NCiAgICAgKiAgICAgICAgIC8vDQogICAg
ICogICAgICAgICAnaXNFbmFibGVkJzogZmFsc2UsDQogICAgICogICAgICAgICAvLw0KICAgICAq
ICAgICAgICAgLy8gc2VsZWN0b3I6IFN0cmluZw0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAg
ICAgICAgIC8vICdUaW1lIGluZGljYXRvcicgc2VsZWN0b3IuDQogICAgICogICAgICAgICAvLw0K
ICAgICAqICAgICAgICAgJ3NlbGVjdG9yJzogbnVsbCwNCiAgICAgKiAgICAgICAgIC8vDQogICAg
ICogICAgICAgICAvLyB2aWV3OiBTdHJpbmcNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAg
ICAgICAvLyBOYW1lIG9mIHRoZSB2aWV3IGNsYXNzLCB3aGljaCB3aWxsIGJlIHVzZWQuIFBvc3Np
YmxlIHZhbHVlcyBhcmU6DQogICAgICogICAgICAgICAvLyAtIFZpZXcgLSB3aXRob3V0IGFueSBh
bmltYXRpb24gKGJhc2UgY2xhc3MpLA0KICAgICAqICAgICAgICAgLy8gLSBQcm9ncmVzc0JhclZp
ZXcgLSBzaG93cyB0aGUgcHJvZ3Jlc3Mgb2YgdGltZSBhcyBwcm9ncmVzcyBiYXIsDQogICAgICog
ICAgICAgICAvLyAtIFJvdGF0b3JWaWV3IC0gc2hvd3MgdGhlIHByb2dyZXNzIG9mIHRpbWUgd2l0
aCB0aGUgZmlsbGluZyB1cCByaW5nDQogICAgICogICAgICAgICAvLyAtIG90aGVyIC0gaWYgaW1w
bGVtZW50ZWQgKGRlcml2ZWQgZnJvbSBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLkluZGljYXRvclZp
ZXdzLlZpZXcgY2xhc3MpIGFuZCBhZGRlZCB0byBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLkluZGlj
YXRvclZpZXdzIG1vZHVsZS4NCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAndmll
dyc6ICdWaWV3JywNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyBvcHRpb25z
OiBPYmplY3QNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyAnVGltZSBpbmRp
Y2F0b3InIHZpZXcgc2V0dGluZ3Mgb2JqZWN0LiBEZXBlbmRzIG9uIHZpZXcuDQogICAgICogICAg
ICAgICAvLw0KICAgICAqICAgICAgICAgJ29wdGlvbnMnOiB7fQ0KICAgICAqICAgICB9DQogICAg
ICogfQ0KICAgICAqLw0KDQogICAgLyogcHViLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHNlbGVjdG9y
LCBvcHRpb25zKSB7DQogICAgIHZhciAkY2Fyb3VzZWxzID0gJChzZWxlY3Rvcik7DQogICAgICRj
YXJvdXNlbHMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgIC8vdmFyIGNhcm91c2VsID0gbmV3IENh
cm91c2VsKCQpOw0KICAgICBjb25zb2xlLmxvZygkKHRoaXMpKTsNCiAgICAgLy9jYXJvdXNlbC5p
bml0KCQodGhpcyksIG9wdGlvbnMpOw0KICAgICB9KTsNCiAgICAgfTsqLw0KDQogICAgLyogQ2Fy
b3VzZWwgdG91Y2ggc3VwcG9ydCAqLw0KICAgIENhcm91c2VsLnByb3RvdHlwZS5zd2lwZVNsaWRl
ID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBzZWxmID0gdGhpcywNCiAgICAgICAgICAgICR3
cmFwcGVyID0gdGhpcy5zbGlkZXIuY29udGV4dC4kd3JhcHBlciwNCiAgICAgICAgICAgIGhhbW1l
ciA9IG5ldyBIYW1tZXIoJHdyYXBwZXJbMF0pOw0KICAgICAgICAgICAgaGFtbWVyLmdldCgncGFu
Jykuc2V0KHsgZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX0FMTCB9KTsNCg0KICAgICAgICBo
YW1tZXIub24oInN3aXBlbGVmdCIsIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgIHNlbGYuc2xp
ZGVyLmNvbnRleHQub3duZXIub25DaGFuZ2VDdXJyZW50U2xpZGUoZSwgMSwgc2VsZi5zbGlkZXIu
Y29udGV4dCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIGhhbW1lci5vbigic3dpcGVyaWdodCIs
IGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgIHNlbGYuc2xpZGVyLmNvbnRleHQub3duZXIub25D
aGFuZ2VDdXJyZW50U2xpZGUoZSwgLTEsIHNlbGYuc2xpZGVyLmNvbnRleHQpOw0KICAgICAgICB9
KTsNCiAgICB9Ow0KDQogICAgQ2Fyb3VzZWwucHJvdG90eXBlLmRpc2FibGVFbXB0eVNsaWRlcyA9
IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgZW1wdHlQbGFjZWhvbGRlcnMgPSB0aGlzLiRzbGlk
ZXMuZmluZCgiLnNjRW1wdHlQbGFjZWhvbGRlciIpLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJD
b2RlVGFnLA0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLA0KICAgICAgICAgICAgcGxhY2Vob2xk
ZXJJZCwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyS2V5LA0KICAgICAgICAgICAgZWRpdEZyYW1l
LA0KICAgICAgICAgICAgY2hyb21lS2V5LA0KICAgICAgICAgICAgaDsNCg0KICAgICAgICBfLmVh
Y2goZW1wdHlQbGFjZWhvbGRlcnMsIGZ1bmN0aW9uKHBsYWNlaG9sZGVyKSB7DQogICAgICAgICAg
ICAkcGxhY2Vob2xkZXIgPSAkKHBsYWNlaG9sZGVyKTsNCiAgICAgICAgICAgIHBsYWNlaG9sZGVy
SWQgPSAkcGxhY2Vob2xkZXIuYXR0cigic2MtcGxhY2Vob2xkZXItaWQiKTsNCg0KICAgICAgICAg
ICAgLy9kaXNhYmxlIGVkaXQgZnJhbWVzDQogICAgICAgICAgICBwbGFjZWhvbGRlckNvZGVUYWcg
PSAkcGxhY2Vob2xkZXIuc2libGluZ3MoImNvZGVbY2hyb21ldHlwZT0ncGxhY2Vob2xkZXInXVtp
ZD0nIiArIHBsYWNlaG9sZGVySWQgKyAiJ10iKTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAg
ICAgICAgICAgcGxhY2Vob2xkZXJLZXkgPSBwbGFjZWhvbGRlckNvZGVUYWcuYXR0cigia2V5Iik7
DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZihwbGFjZWhvbGRlcktleSkgPT09ICJzdHJpbmci
KSB7DQogICAgICAgICAgICAgICAgICAgIGVkaXRGcmFtZSA9IFNpdGVjb3JlLlBhZ2VNb2Rlcy5D
aHJvbWVNYW5hZ2VyLmNocm9tZXMoKS5maWx0ZXIoZnVuY3Rpb24oY2hyb21lKSB7DQogICAgICAg
ICAgICAgICAgICAgICAgICBjaHJvbWVLZXkgPSBjaHJvbWUub3BlbmluZ01hcmtlcigpOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaHJvbWVLZXkpIHsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAg
ICAgICAgICAgICAgICAgICAgICAgIGNocm9tZUtleSA9IGNocm9tZUtleS5hdHRyKCJrZXkiKTsN
CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YoY2hyb21lS2V5KSAhPT0gInVu
ZGVmaW5lZCIgJiYgY2hyb21lS2V5LmluZGV4T2YocGxhY2Vob2xkZXJLZXkpID09PSAwOw0KICAg
ICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBlZGl0RnJhbWVbMF0u
dHlwZS5jaHJvbWUuZGF0YS5jdXN0b20uZWRpdGFibGUgPSAiZmFsc2UiOw0KICAgICAgICAgICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IDY2NjsNCiAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8vZmFsbGJhY2sgLSBkZWxldGUgY29k
ZSB0YWdzIHRvIHByZXZlbnQgaW5zZXJ0aW5nIGludG8gcGxhY2Vob2xkZXJzDQogICAgICAgICAg
ICAgICAgJHBsYWNlaG9sZGVyLnNpYmxpbmdzKCJjb2RlW2Nocm9tZXR5cGU9J3BsYWNlaG9sZGVy
J10iKS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25z
b2xlICovDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkNvdWxkIG5vdCBkaXNhYmxlIGVk
aXRpbmcgZm9yIHBsYWNlaG9sZGVyIiwgZSk7DQogICAgICAgICAgICAgICAgLyogZXNsaW50LWVu
YWJsZSBuby1jb25zb2xlICovDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vYWRqdXN0
IGhlaWdodCwgYW5kIHJlbW92ZSBwbGFjZWhvbGRlciAiZGFzaGVkIiBiYWNrZ3JvdW5kDQogICAg
ICAgICAgICBoID0gJHBsYWNlaG9sZGVyLmhlaWdodCgpICsgInB4IjsNCiAgICAgICAgICAgICRw
bGFjZWhvbGRlci5yZW1vdmVDbGFzcygic2NFbXB0eVBsYWNlaG9sZGVyIik7DQogICAgICAgICAg
ICAkcGxhY2Vob2xkZXIuY3NzKCJoZWlnaHQiLCBoKTsNCg0KICAgICAgICAgICAgLy9zZXQgZWRp
dCBoZXJlIHRleHQNCiAgICAgICAgICAgICRwbGFjZWhvbGRlci5hcHBlbmQoJCgiPHA+W05vIGNv
bXBvbmVudHMgaW4gc2xpZGVdPC9wPiIpKTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQoNCiAgICBD
YXJvdXNlbC5wcm90b3R5cGUucmVzaXplV3JhcHBlciA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB2
YXIgcGFnZUhlaWdodCA9ICQoZG9jdW1lbnQpLm91dGVySGVpZ2h0KCksDQogICAgICAgICAgICBo
ZWFkZXJIZWlnaHQgPSAkKCcjaGVhZGVyJykub3V0ZXJIZWlnaHQoKSwNCiAgICAgICAgICAgIGNv
bnRlbnRQYWRkaW5nVG9wID0gcGFyc2VJbnQoJCgnI2NvbnRlbnQnKS5jc3MoJ3BhZGRpbmctdG9w
JyksIDEwKSwNCiAgICAgICAgICAgIGNvbnRlbnRQYWRkaW5nQm90dG9tID0gcGFyc2VJbnQoJCgn
I2NvbnRlbnQnKS5jc3MoJ3BhZGRpbmctYm90dG9tJyksIDEwKSwNCiAgICAgICAgICAgIGNvbnRl
bnRQYWRkaW5nID0gY29udGVudFBhZGRpbmdUb3AgKyBjb250ZW50UGFkZGluZ0JvdHRvbSwNCiAg
ICAgICAgICAgIGZvb3RlckhlaWdodCA9ICQoJyNmb290ZXInKS5vdXRlckhlaWdodCgpLA0KICAg
ICAgICAgICAgd3JhcHBlciA9IHRoaXMuc2xpZGVyLmNvbnRleHQuJHdyYXBwZXIsDQogICAgICAg
ICAgICBjYXJvdXNlbEhlaWdodCA9IDA7DQoNCiAgICAgICAgY2Fyb3VzZWxIZWlnaHQgPSBwYWdl
SGVpZ2h0IC0gKGhlYWRlckhlaWdodCArIGZvb3RlckhlaWdodCArIGNvbnRlbnRQYWRkaW5nKTsN
Cg0KICAgICAgICB3cmFwcGVyLmNzcyh7DQogICAgICAgICAgICAnaGVpZ2h0JzogY2Fyb3VzZWxI
ZWlnaHQNCiAgICAgICAgfSk7DQoNCiAgICAgICAgd3JhcHBlci5maW5kKCcuc2xpZGVzJykuY3Nz
KHsNCiAgICAgICAgICAgICdoZWlnaHQnOiBjYXJvdXNlbEhlaWdodA0KICAgICAgICB9KTsNCiAg
ICB9Ow0KDQogICAgZnVuY3Rpb24gZ2V0UXVlcnlQYXJhbSh2YXJpYWJsZSkgew0KICAgICAgICB2
YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTsNCiAgICAgICAg
dmFyIHZhcnMgPSBxdWVyeS5zcGxpdCgiJiIpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8
IHZhcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBwYWlyID0gdmFyc1tpXS5zcGxp
dCgiPSIpOw0KICAgICAgICAgICAgaWYgKGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKSA9PT0g
dmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHBh
aXJbMV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOw0K
ICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZVF1ZXJ5UGFyYW0oa2V5LCB2YWx1ZSkgew0KICAg
ICAgICB2YXIgdXJsOw0KICAgICAgICANCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVm
LmluZGV4T2Yoa2V5ICsgIj0iKSA+IC0xKSB7DQogICAgICAgICAgICB1cmwgPSBsb2NhdGlvbi5o
cmVmLnJlcGxhY2Uoa2V5ICsgIj0iICsgZ2V0UXVlcnlQYXJhbShrZXkpLCBrZXkgKyAiPSIgKyB2
YWx1ZSk7DQogICAgICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigi
PyIpID4gLTEpIHsNCiAgICAgICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAiJiIgKyBrZXkg
KyAiPSIgKyB2YWx1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHVybCA9IGxvY2F0
aW9uLmhyZWYgKyAiPyIgKyBrZXkgKyAiPSIgKyB2YWx1ZTsNCiAgICAgICAgfQ0KDQogICAgICAg
IGlmIChoaXN0b3J5LnB1c2hTdGF0ZSkgew0KICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVw
bGFjZVN0YXRlKHtwYXRoOnVybH0sICIiLCB1cmwpOw0KICAgICAgICB9DQogICAgfQ0KDQoNCiAg
ICBwdWIuaW5pdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgJCgiLmNhcm91c2VsOm5vdCguaW5p
dGlhbGl6ZWQpIikuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgcHJvcGVydGll
cyA9ICQodGhpcykuZGF0YSgicHJvcGVydGllcyIpLA0KICAgICAgICAgICAgICAgIGNvbXBvbmVu
dCA9ICQodGhpcykuZmluZCgiLmNhcm91c2VsLWlubmVyIiksDQogICAgICAgICAgICAgICAgaWQg
PSBjb21wb25lbnQuYXR0cigiZGF0YS1pZCIpLA0KICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlz
LA0KICAgICAgICAgICAgICAgIHF1ZXJ5U2xpZGVJbmRleCA9IE51bWJlci5wYXJzZUludChnZXRR
dWVyeVBhcmFtKGNvbXBvbmVudC5jbG9zZXN0KCcuY29tcG9uZW50LmNhcm91c2VsJykuYXR0cigi
aWQiKSB8fCAiY2Fyb3VzZWwiKSksDQogICAgICAgICAgICAgICAgdmFsaWRRdWVyeVBhcmFtID0g
dHlwZW9mIHF1ZXJ5U2xpZGVJbmRleCAhPT0gInVuZGVmaW5lZCIgJiYgIU51bWJlci5pc05hTihx
dWVyeVNsaWRlSW5kZXgpICYmIHF1ZXJ5U2xpZGVJbmRleCA8IGNvbXBvbmVudC5maW5kKCIuc3hh
LW51bWJlcnMiKS5sZW5ndGgsDQogICAgICAgICAgICAgICAgY29udGV4dCwgc2V0dGluZ3MsICRj
dXJyZW50U2xpZGUsICRzbGlkZXM7DQoNCiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKSB7DQog
ICAgICAgICAgICAgICAgaWYgKCFwcm9wZXJ0aWVzLm5hdmlnYXRpb24pIHsNCiAgICAgICAgICAg
ICAgICAgICAgcHJvcGVydGllcy5uYXZpZ2F0aW9uID0gew0KICAgICAgICAgICAgICAgICAgICAg
ICAgaXRlbToge30sDQogICAgICAgICAgICAgICAgICAgICAgICBwcmV2SXRlbToge30sDQogICAg
ICAgICAgICAgICAgICAgICAgICBuZXh0SXRlbToge30sDQogICAgICAgICAgICAgICAgICAgICAg
ICBpc0VuYWJsZWQ6IHZhbGlkUXVlcnlQYXJhbSA/IGZhbHNlOiB0cnVlDQogICAgICAgICAgICAg
ICAgICAgIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHByb3BlcnRpZXMu
bmF2aWdhdGlvbi5pdGVtLnNlbGVjdG9yID0gIltkYXRhLWlkPSciICsgaWQgKyAiJ10gLm5hdi1p
dGVtcyI7IC8vcHJvcGVydGllcy5uYXZpZ2F0aW9uLml0ZW0uc2VsZWN0b3I7DQogICAgICAgICAg
ICAgICAgcHJvcGVydGllcy5uYXZpZ2F0aW9uLnByZXZJdGVtLnNlbGVjdG9yID0gIiMiICsgaWQg
KyAiIC5uYXYiOw0KICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubmF2aWdhdGlvbi5uZXh0SXRl
bS5zZWxlY3RvciA9ICIjIiArIGlkICsgIiAubmF2IjsNCg0KICAgICAgICAgICAgICAgIHZhciBj
YXJvdXNlbCA9IG5ldyBDYXJvdXNlbCgkKTsNCiAgICAgICAgICAgICAgICBjYXJvdXNlbC5pbml0
KGNvbXBvbmVudCwgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24o
J2xvYWQnLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCQoc2VsZikuaGFz
Q2xhc3MoJ2Nhcm91c2VsLWNsaWVudHMnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2Fy
b3VzZWwucmVzaXplV3JhcHBlcigpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAg
ICAgICAgICAgICAgY2Fyb3VzZWwuZGlzYWJsZUVtcHR5U2xpZGVzKCk7DQogICAgICAgICAgICAg
ICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAodmFsaWRRdWVyeVBhcmFtKSB7DQogICAgICAg
ICAgICAgICAgICAgIGNvbnRleHQgPSBjYXJvdXNlbC5zbGlkZXIuY29udGV4dCwNCiAgICAgICAg
ICAgICAgICAgICAgc2V0dGluZ3MgPSBjb250ZXh0LnRyYW5zaXRpb25TZXR0aW5ncywNCiAgICAg
ICAgICAgICAgICAgICAgJGN1cnJlbnRTbGlkZSA9IGNvbnRleHQuZ2V0Q3VycmVudFNsaWRlKCks
DQogICAgICAgICAgICAgICAgICAgICRzbGlkZXMgPSBjb250ZXh0LiRzbGlkZXM7DQoNCiAgICAg
ICAgICAgICAgICAgICAgY29udGV4dC5jYW5DaGFuZ2VTbGlkZSA9IGZhbHNlOw0KICAgICAgICAg
ICAgICAgICAgICBzZXR0aW5ncy4kY3VycmVudFNsaWRlID0gJGN1cnJlbnRTbGlkZTsNCiAgICAg
ICAgICAgICAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZSA9ICQoJHNsaWRlc1txdWVyeVNsaWRl
SW5kZXhdKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNoYW5nZUN1cnJlbnRTbGlk
ZShzZXR0aW5ncy4kbmV4dFNsaWRlKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC50cmFu
c2l0aW9uLnBlcmZvcm0oY29udGV4dC50cmFuc2l0aW9uU2V0dGluZ3MpOw0KICAgICAgICAgICAg
ICAgICAgICBjb250ZXh0Lm93bmVyLmV4ZWN1dGVPblRpbWVycygncmVzZXQnLCBjb250ZXh0KTsN
Cg0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm5hdmlnYXRpb24ucHJlcGFyZUl0ZW1zKHBy
b3BlcnRpZXMubmF2aWdhdGlvbi5pdGVtLCAkc2xpZGVzLmxlbmd0aCwgJChjb250ZXh0LiR3cmFw
cGVyKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubmF2aWdhdGlvbi5zZWxlY3RJdGVt
KHF1ZXJ5U2xpZGVJbmRleCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAg
ICAgICAgICAgY2Fyb3VzZWwuc3dpcGVTbGlkZSgpOyAgIA0KICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygiaW5pdGlhbGl6ZWQi
KTsNCiAgICAgICAgfSk7DQogICAgfTsNCg0KICAgIHJldHVybiBwdWI7DQp9KGpRdWVyeSkpOw0K
LyoqDQogKiBlbmQgb2YgWEEuY29tcG9uZW50LmNhcm91c2VscyBtb2R1bGUuDQogKi8NCg0KDQpY
QS5yZWdpc3RlcigiY2Fyb3VzZWxzIiwgWEEuY29tcG9uZW50LmNhcm91c2Vscyk7DQoNCg0KLyoq
DQogKiBYQUNvbnRleHQNCiAqDQogKiBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25z
IG1vZHVsZS4NCiAqDQogKiBFeHBvc2VzIFRyYW5zaXRpb24gY2xhc3MsIHdoaWNoIGlzIGJhc2Ug
Y2xhc3Mgb2YgYWxsIHRyYW5zaXRpb25zIHVzZWQgYnkgY2Fyb3VzZWxzIChAc2VlIFhBLmNvbXBv
bmVudC5jYXJvdXNlbHMsIEBzZWUgU2xpZGVyLCBAc2VlIFRyYW5zaXRpb24pLg0KICogQWxzbyBl
eHBvc2VzIGltcGxlbWVudGF0aW9uIG9mIGJhc2ljIGVmZmVjdHM6DQogKiAtIEJhc2ljVHJhbnNp
dGlvbiAtIHdpdGhvdXQgYW55IGFuaW1hdGlvbiwNCiAqIC0gRmFkZUluVHJhbnNpdGlvbiAtIG5l
dyBzbGlkZSBmYWRlcyBpbiwNCiAqIC0gU2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uIC0gbmV3
IHNsaWRlIG1vdmVzIGZyb20gcmlnaHQgKGZyb20gbGVmdCBpZiB1c2VyIHNlbGVjdHMgc2xpZGUg
d2l0aCBsb3dlciBpZCBvciBjbGlja3Mgb24gJ3ByZXZpb3VzIGl0ZW0nKSwNCiAqIC0gU2xpZGVW
ZXJ0aWNhbGx5VHJhbnNpdGlvbiAtIG5ldyBzbGlkZSBtb3ZlcyBmcm9tIHRvcCAoZnJvbSBib3R0
b20gaWYgdXNlciBzZWxlY3RzIHNsaWRlIHdpdGggbG93ZXIgaWQgb3IgY2xpY2tzIG9uICdwcmV2
aW91cyBpdGVtJykuDQogKiBDYXJvdXNlbCB0YWtlcyB0aGUgY2xhc3MgY29uc3RydWN0b3IgYnkg
bmFtZSBmcm9tIHRoaXMgbW9kdWxlIChpdCBpcyBnaXZlbiBpbiBvcHRpb25zIG9iamVjdCBvZiBj
YXJvdXNlbDsgQHNlZSBYQS5jb21wb25lbnQuY2Fyb3VzZWxzKS4NCiAqIElmIHRoZXJlIGlzIGEg
bmVlZCB0byBpbXBsZW1lbnQgdGhlIG5ldyBlZmZlY3QsIGNyZWF0ZSBhIG5ldyBjbGFzcywgYnkg
aW5oZXJpdGluZyBmcm9tIFRyYW5zaXRpb24gY2xhc3MgYW5kIGFkZCBpdCB0byB0aGlzIG1vZHVs
ZS4NCiAqDQogKiBFeGFtcGxlIGVmZmVjdCBpbXBsZW1lbnRhdGlvbiAoY3VycmVudGx5IGRpc3Bs
YXllZCBzbGlkZSBpcyBzaHJpbmtpbmcgdG8gY2VudGVyIG9mIHRoZSBjYXJvdXNlbCk6DQogKiAo
ZnVuY3Rpb24gKCkgew0KKiAgICAgZnVuY3Rpb24gU2FtcGxlVHJhbnNpdGlvbigpIHsgfQ0KKg0K
KiAgICAgLy9pbmhlcml0IGZyb20gWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFuc2l0aW9ucy5U
cmFuc2l0aW9uDQoqICAgICBTYW1wbGVUcmFuc2l0aW9uLnByb3RvdHlwZSA9IG5ldyBYQS5jb21w
b25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zLlRyYW5zaXRpb24oKTsNCiogICAgIFNhbXBsZVRy
YW5zaXRpb24uY29uc3RydWN0b3IgPSBTYW1wbGVUcmFuc2l0aW9uOw0KKg0KKiAgICAgU2FtcGxl
VHJhbnNpdGlvbi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChzZXR0aW5ncykgew0KKiAgICAg
ICAgIC8vcG9zaXRpb25pbmcgYWxsIHNsaWRlcyBpbiB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRo
ZSBjYXJvdXNlbA0KKiAgICAgICAgIHNldHRpbmdzLiRzbGlkZXMuY3NzKHsNCiogICAgICAgICAg
ICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJywNCiogICAgICAgICAgICAgJ3RvcCc6ICcwcHgnLA0K
KiAgICAgICAgICAgICAnbGVmdCc6ICcwcHgnDQoqICAgICAgICAgfSk7DQoqICAgICB9Ow0KKg0K
KiAgICAgU2FtcGxlVHJhbnNpdGlvbi5wcm90b3R5cGUub25BbmltYXRpb25Db21wbGV0ZSA9IGZ1
bmN0aW9uKHNldHRpbmdzLCB3aWR0aCwgaGVpZ2h0KSB7DQoqICAgICAgICAgdmFyIHpJbmRleEF0
dHJpYiA9ICd6LWluZGV4JywNCiogICAgICAgICAkY3VycmVudCA9IHNldHRpbmdzLiRjdXJyZW50
U2xpZGU7DQoqDQoqICAgICAgICAgJGN1cnJlbnQuaGlkZSgpOw0KICAgICAgICAgIC8vcmV2ZXJ0
aW5nIGNoYW5nZXMgaW4gY3NzIHByb3BlcnRpZXMNCiogICAgICAgICAkY3VycmVudC5jc3Moew0K
KiAgICAgICAgICAgICAnd2lkdGgnOiB3aWR0aCwNCiogICAgICAgICAgICAgJ2hlaWdodCc6IGhl
aWdodCwNCiogICAgICAgICAgICAgJ2xlZnQnOiAwLA0KKiAgICAgICAgICAgICAndG9wJzogMA0K
KiAgICAgICAgIH0pOw0KKiAgICAgICAgICRjdXJyZW50LmNzcyh6SW5kZXhBdHRyaWIsICcnKTsN
CiogICAgICAgICBzZXR0aW5ncy4kc2xpZGVzLnBhcmVudCgpLmNzcyh6SW5kZXhBdHRyaWIsICcn
KTsNCioNCiogICAgICAgICAvL25vdGlmeWluZyB0aGUgY2Fyb3VzZWwsIHRoYXQgYW5pbWF0aW9u
IGlzIGNvbXBsZXRlZA0KKiAgICAgICAgIHNldHRpbmdzLmNhbGxiYWNrKCk7DQoqICAgICB9Ow0K
Kg0KKiAgICAgU2FtcGxlVHJhbnNpdGlvbi5wcm90b3R5cGUucGVyZm9ybSA9IGZ1bmN0aW9uIChz
ZXR0aW5ncykgew0KKiAgICAgICAgIHZhciBoZWlnaHQgPSBzZXR0aW5ncy4kY3VycmVudFNsaWRl
LmhlaWdodCgpLA0KKiAgICAgICAgIHdpZHRoID0gc2V0dGluZ3MuJGN1cnJlbnRTbGlkZS53aWR0
aCgpLA0KKiAgICAgICAgIG9uQW5pbWF0aW9uQ29tcGxldGVkID0gdGhpcy5vbkFuaW1hdGlvbkNv
bXBsZXRlLA0KKiAgICAgICAgIHpJbmRleEF0dHJpYiA9ICd6LWluZGV4JywNCiogICAgICAgICAk
cGFyZW50ID0gc2V0dGluZ3MuJHNsaWRlcy5wYXJlbnQoKSwNCiogICAgICAgICAkY3VycmVudCA9
IHNldHRpbmdzLiRjdXJyZW50U2xpZGUsDQoqICAgICAgICAgJG5leHQgPSBzZXR0aW5ncy4kbmV4
dFNsaWRlOw0KKg0KKiAgICAgICAgIC8vc2V0dGluZyBhIG5ldyBzbGlkZSB1bmRlciB0aGUgY3Vy
cmVudCBzbGlkZQ0KKiAgICAgICAgICRwYXJlbnQuY3NzKHpJbmRleEF0dHJpYiwgMCk7DQoqICAg
ICAgICAgJGN1cnJlbnQuY3NzKHpJbmRleEF0dHJpYiwgMSk7DQoqICAgICAgICAgJG5leHQuc2hv
dygpOw0KKg0KKiAgICAgICAgIC8vYW5pbWF0ZSBjdXJyZW50IHNsaWRlDQoqICAgICAgICAgJGN1
cnJlbnQuYW5pbWF0ZSh7DQoqICAgICAgICAgICAgICd3aWR0aCc6ICcwcHgnLA0KKiAgICAgICAg
ICAgICAnaGVpZ2h0JzogJzBweCcsDQoqICAgICAgICAgICAgICdsZWZ0Jzogd2lkdGggLyAyLA0K
KiAgICAgICAgICAgICAndG9wJzogaGVpZ2h0IC8gMg0KKiAgICAgICAgIH0sIGZ1bmN0aW9uKCkg
ew0KKiAgICAgICAgICAgICBvbkFuaW1hdGlvbkNvbXBsZXRlZChzZXR0aW5ncywgd2lkdGgsIGhl
aWdodCk7DQoqICAgICAgICAgfSk7DQoqICAgICB9Ow0KKg0KKiAgICAgLy9hZGRpbmcgbmV3IGVm
ZmVjdCB0byBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zIG1vZHVsZS4NCiogICAg
IFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuVHJhbnNpdGlvbnMuU2FtcGxlVHJhbnNpdGlvbiA9IFNh
bXBsZVRyYW5zaXRpb247DQoqIH0gKCkpOw0KICoNCiAqLw0KWEEuY29tcG9uZW50LmNhcm91c2Vs
cy5UcmFuc2l0aW9ucyA9IChmdW5jdGlvbigpIHsNCiAgICB2YXIgcHViID0ge307DQoNCiAgICAv
KioNCiAgICAgKiBUcmFuc2l0aW9uU2V0dGluZ3MgY2xhc3MgaG9sZHMgZGF0YSBuZWVkZWQgZm9y
IGNoYW5naW5nIHNsaWRlcw0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqLw0KICAgIGZ1bmN0
aW9uIFRyYW5zaXRpb25TZXR0aW5ncygpIHt9DQogICAgLyoqDQogICAgICogQ3VycmVudCBzbGlk
ZSAoY3VycmVudGx5IGRpc3BsYXllZCkgalF1ZXJ5IG9iamVjdA0KICAgICAqDQogICAgICogQG1l
bWJlciBUcmFuc2l0aW9uU2V0dGluZ3MNCiAgICAgKi8NCiAgICBUcmFuc2l0aW9uU2V0dGluZ3Mu
cHJvdG90eXBlLiRjdXJyZW50U2xpZGUgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIE5leHQgc2xp
ZGUgalF1ZXJ5IG9iamVjdA0KICAgICAqDQogICAgICogQG1lbWJlciBUcmFuc2l0aW9uU2V0dGlu
Z3MNCiAgICAgKi8NCiAgICBUcmFuc2l0aW9uU2V0dGluZ3MucHJvdG90eXBlLiRuZXh0U2xpZGUg
PSBudWxsOw0KICAgIC8qKg0KICAgICAqIEFsbCBzbGlkZXMgKGpRdWVyeSBvYmplY3QpDQogICAg
ICoNCiAgICAgKiBAbWVtYmVyIFRyYW5zaXRpb25TZXR0aW5ncw0KICAgICAqLw0KICAgIFRyYW5z
aXRpb25TZXR0aW5ncy5wcm90b3R5cGUuJHNsaWRlcyA9IG51bGw7DQogICAgLyoqDQogICAgICog
T2Zmc2V0IGJldHdlZW4gJGN1cnJlbnRTbGlkZSBhbmQgJG5leHRTbGlkZQ0KICAgICAqDQogICAg
ICogQG1lbWJlciBUcmFuc2l0aW9uU2V0dGluZ3MNCiAgICAgKi8NCiAgICBUcmFuc2l0aW9uU2V0
dGluZ3MucHJvdG90eXBlLm9mZnNldCA9IDA7DQogICAgLyoqDQogICAgICogQ2FsbGJhY2sgZnVu
Y3Rpb24gd2hpY2ggbXVzdCBiZSBjYWxsZWQgYWZ0ZXIgYW5pbWF0aW9uLg0KICAgICAqDQogICAg
ICogQG1lbWJlciBUcmFuc2l0aW9uU2V0dGluZ3MNCiAgICAgKi8NCiAgICBUcmFuc2l0aW9uU2V0
dGluZ3MucHJvdG90eXBlLmNhbGxiYWNrID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBlbmQgb2Yg
VHJhbnNpdGlvblNldHRpbmdzIGNsYXNzDQogICAgICovDQogICAgcHViLlRyYW5zaXRpb25TZXR0
aW5ncyA9IFRyYW5zaXRpb25TZXR0aW5nczsNCg0KICAgIC8qKg0KICAgICAqIFRyYW5zaXRpb24g
Y2xhc3MgaXMgYSBiYXNlIGNsYXNzIG9mIGFsbCB0cmFuc2l0aW9ucy4NCiAgICAgKg0KICAgICAq
IEltcG9ydGFudDogc2V0dGluZ3MuY2FsbGJhY2soKSAoQHNlZSBUcmFuc2l0aW9uU2V0dGluZ3Mp
IGhhdmUgdG8gYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2YgZXhlY3V0aW9uIHRoZSBwZXJmb3JtKCkg
bWV0aG9kLg0KICAgICAqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICovDQogICAgZnVuY3Rp
b24gVHJhbnNpdGlvbigpIHt9DQogICAgVHJhbnNpdGlvbi5wcm90b3R5cGUgPSBuZXcgVHJhbnNp
dGlvbigpOw0KICAgIC8qKg0KICAgICAqIEluaXRpYWxpemVzIGEgdHJhbnNpdGlvbiB3aXRoIGdp
dmVuIHNldHRpbmdzIChAc2VlIFRyYW5zaXRpb25TZXR0aW5ncykuDQogICAgICogDQogICAgICog
QG1lbWJlciBUcmFuc2l0aW9uDQogICAgICogQHBhcmFtIHtUcmFuc2l0aW9uU2V0dGluZ3N9IHNl
dHRpbmdzICB0cmFuc2l0aW9uIHNldHRpbmdzDQogICAgICovDQogICAgLyogZXNsaW50LWRpc2Fi
bGUgKi8NCiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oc2V0dGluZ3Mp
IHsNCiAgICAgICAgLy9pbXBsZW1lbnRhdGlvbiB1c2luZyBzZXR0aW5ncw0KICAgIH07DQogICAg
LyogZXNsaW50LWVuYWJsZSAqLw0KICAgIC8qKg0KICAgICAqIFJldHVybnMgYSBmYWN0b3IgYXNz
b2NpYXRlZCB3aXRoIHNldHRpbmdzLm9mZnNldCAoQHNlZSBUcmFuc2l0aW9uU2V0dGluZ3MpLCB3
aGljaA0KICAgICAqIGNhbiBiZSB1c2VmdWxsIGZvciBzb21lIGFuaW1hdGlvbnMuDQogICAgICoN
CiAgICAgKiBAbWVtYmVyIFRyYW5zaXRpb24NCiAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb25TZXR0
aW5nc30gc2V0dGluZ3MgIHRyYW5zaXRpb24gc2V0dGluZ3MNCiAgICAgKiBAcmV0dXJuIFRoZSBm
YWN0b3I7IDEgaWYgb2Zmc2V0IGlzIGhpZ2hlciB0aGFuIDAsIC0xIG90aGVyd2lzZQ0KICAgICAq
IEB0eXBlIE51bWJlcg0KICAgICAqLw0KICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmZhY3RvciA9
IGZ1bmN0aW9uKHNldHRpbmdzKSB7DQogICAgICAgIHJldHVybiAoc2V0dGluZ3Mub2Zmc2V0ID4g
MCkgPyAxIDogLTE7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxs
ZWQgdXNlZCBieSBjYXJvdXNlbHMgdG8gY2hhbmdlIHNsaWRlcy4NCiAgICAgKg0KICAgICAqIElt
cG9ydGFudDogc2V0dGluZ3MuY2FsbGJhY2soKSAoQHNlZSBUcmFuc2l0aW9uU2V0dGluZ3MpIGhh
dmUgdG8gYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2YgdGhpcyBtZXRob2QgZXhlY3V0aW9uLg0KICAg
ICAqDQogICAgICogQG1lbWJlciBUcmFuc2l0aW9uDQogICAgICogQHBhcmFtIHtUcmFuc2l0aW9u
U2V0dGluZ3N9IHNldHRpbmdzICB0cmFuc2l0aW9uIHNldHRpbmdzDQogICAgICovDQogICAgVHJh
bnNpdGlvbi5wcm90b3R5cGUucGVyZm9ybSA9IGZ1bmN0aW9uKHNldHRpbmdzKSB7DQogICAgICAg
IHNldHRpbmdzLmNhbGxiYWNrKCk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBFbmQgb2YgVHJh
bnNpdGlvbiBjbGFzcw0KICAgICAqLw0KICAgIHB1Yi5UcmFuc2l0aW9uID0gVHJhbnNpdGlvbjsN
Cg0KICAgIC8qKg0KICAgICAqIEJhc2ljVHJhbnNpdGlvbiBjbGFzcyBjaGFuZ2VzIHNsaWRlcyB3
aXRob3V0IGFueSBhbmltYXRpb24uDQogICAgICogRG8gbm90IHJlbW92ZSB0aGlzIGNsYXNzLCBi
ZWNhb3VzZSBjYXJvdXNlbHMgd2lsbCB1c2UgaXQgYnkgZGVmYXVsdCwNCiAgICAgKiBpZiByZXF1
ZXN0ZWQgdHJhbnNpdGlvbiBjYW5ub3QgYmUgZm91bmQuDQogICAgICogQGNvbnN0cnVjdG9yDQog
ICAgICovDQogICAgZnVuY3Rpb24gQmFzaWNUcmFuc2l0aW9uKCkge30NCiAgICBCYXNpY1RyYW5z
aXRpb24ucHJvdG90eXBlID0gbmV3IFRyYW5zaXRpb24oKTsNCiAgICBCYXNpY1RyYW5zaXRpb24u
Y29uc3RydWN0b3IgPSBCYXNpY1RyYW5zaXRpb247DQogICAgLyoqDQogICAgICogQG1lbWJlciBC
YXNpY1RyYW5zaXRpb24NCiAgICAgKi8NCiAgICBCYXNpY1RyYW5zaXRpb24ucHJvdG90eXBlLnBl
cmZvcm0gPSBmdW5jdGlvbihzZXR0aW5ncykgew0KICAgICAgICBzZXR0aW5ncy4kY3VycmVudFNs
aWRlLmhpZGUoKTsNCiAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZS5zaG93KCk7DQoNCiAgICAg
ICAgc2V0dGluZ3MuY2FsbGJhY2soKTsNCiAgICB9Ow0KICAgIC8qKg0KICAgICAqIEVuZCBvZiBC
YXNpY1RyYW5zaXRpb24gY2xhc3MNCiAgICAgKi8NCiAgICBwdWIuQmFzaWNUcmFuc2l0aW9uID0g
QmFzaWNUcmFuc2l0aW9uOw0KDQogICAgLyoqDQogICAgICogRmFkZUluVHJhbnNpdGlvbiBjbGFz
cyBjaGFuZ2VzIHNsaWRlcyBieSBmYWRpbmcgaW4gbmV3IHNsaWRlLg0KICAgICAqIFRoaXMgY2xh
c3MgY2FuIGJlIHJlbW92ZWQgaWYgZWZmZWN0IGlzIG5vdCB1c2VkLg0KICAgICAqIEBjb25zdHJ1
Y3Rvcg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIEZhZGVJblRyYW5zaXRpb24oKSB7fQ0KICAgIEZh
ZGVJblRyYW5zaXRpb24ucHJvdG90eXBlID0gbmV3IFRyYW5zaXRpb24oKTsNCiAgICBGYWRlSW5U
cmFuc2l0aW9uLmNvbnN0cnVjdG9yID0gRmFkZUluVHJhbnNpdGlvbjsNCiAgICAvKioNCiAgICAg
KiBAbWVtYmVyIEZhZGVJblRyYW5zaXRpb24NCiAgICAgKi8NCiAgICBGYWRlSW5UcmFuc2l0aW9u
LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7DQogICAgICAgIC8qc2V0dGluZ3MuJHNsaWRl
cy5jc3Moew0KICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJywNCiAgICAgICAgICd0b3An
OiAnMHB4JywNCiAgICAgICAgICdsZWZ0JzogJzBweCcNCiAgICAgICAgIH0pOyovDQogICAgfTsN
CiAgICAvKioNCiAgICAgKiBAbWVtYmVyIEZhZGVJblRyYW5zaXRpb24NCiAgICAgKi8NCiAgICBG
YWRlSW5UcmFuc2l0aW9uLnByb3RvdHlwZS5wZXJmb3JtID0gZnVuY3Rpb24oc2V0dGluZ3MpIHsN
CiAgICAgICAgdmFyIHpJbmRleEF0dHJpYiA9ICd6LWluZGV4JywNCiAgICAgICAgICAgICRwYXJl
bnQgPSBzZXR0aW5ncy4kc2xpZGVzLnBhcmVudCgpLA0KICAgICAgICAgICAgJG5leHRTbGlkZSA9
IHNldHRpbmdzLiRuZXh0U2xpZGU7DQoNCiAgICAgICAgJHBhcmVudC5jc3MoekluZGV4QXR0cmli
LCAwKTsNCiAgICAgICAgJG5leHRTbGlkZS5jc3MoekluZGV4QXR0cmliLCAxKTsNCiAgICAgICAg
c2V0dGluZ3MuJHNsaWRlcy5jc3Moew0KICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ3JlbGF0aXZl
Jw0KICAgICAgICB9KTsNCg0KICAgICAgICBzZXR0aW5ncy4kbmV4dFNsaWRlLmNzcyh7DQogICAg
ICAgICAgICAncG9zaXRpb24nOiAnYWJzb2x1dGUnLA0KICAgICAgICAgICAgJ3RvcCc6ICc1MCUn
LA0KICAgICAgICAgICAgJ2xlZnQnOiAnNTAlJywNCiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAn
dHJhbnNsYXRlKC01MCUsLTUwJSknDQogICAgICAgIH0pOw0KDQoNCiAgICAgICAgJG5leHRTbGlk
ZS5mYWRlSW4oZnVuY3Rpb24oKSB7DQogICAgICAgICAgICBzZXR0aW5ncy4kY3VycmVudFNsaWRl
LmhpZGUoKTsNCg0KICAgICAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZS5jc3Moew0KICAgICAg
ICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsDQogICAgICAgICAgICAgICAgJ2xlZnQn
OiAnMCcsDQogICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdub25lJw0KICAgICAgICAgICAg
fSk7DQoNCiAgICAgICAgICAgICRuZXh0U2xpZGUuY3NzKHpJbmRleEF0dHJpYiwgJycpOw0KICAg
ICAgICAgICAgJHBhcmVudC5jc3MoekluZGV4QXR0cmliLCAnJyk7DQoNCiAgICAgICAgICAgIHNl
dHRpbmdzLmNhbGxiYWNrKCk7DQogICAgICAgIH0pOw0KICAgIH07DQogICAgLyoqDQogICAgICog
RW5kIG9mIEZhZGVJblRyYW5zaXRpb24gY2xhc3MNCiAgICAgKi8NCiAgICBwdWIuRmFkZUluVHJh
bnNpdGlvbiA9IEZhZGVJblRyYW5zaXRpb247DQoNCiAgICAvKioNCiAgICAgKiBTbGlkZUhvcml6
b250YWxseVRyYW5zaXRpb24gY2xhc3MgY2hhbmdlcyBzbGlkZXMgYnkgc2xpZGluZyB0aGVtIGhv
cml6b250YWxseS4NCiAgICAgKiBUaGlzIGNsYXNzIGNhbiBiZSByZW1vdmVkIGlmIGVmZmVjdCBp
cyBub3QgdXNlZC4NCiAgICAgKiBJZiBvZmZzZXQgKGRpZmZlcmVuY2UgYmV0d2VlbiBpbmRleCBv
ZiBjdXJyZW50bHkgZGlzcGxheWVkIHNsaWRlIGFuZCBpbmRleCBvZiBzbGlkZSB0aGF0IHdpbGwg
YmUgc2hvd24pDQogICAgICogaXMgZ3JlYXRlciB0aGFuIDAsIHNsaWRlcyBhcmUgc2xpZGluZyB0
byB0aGUgbGVmdC4gT3RoZXJ3aXNlIChvZmZzZXQgaXMgbG93ZXIgdGhhbiAwKSwgc2xpZGVzIGFy
ZSBzbGlkaW5nDQogICAgICogdG8gdGhlIGxlZnQuDQogICAgICogV2hlbiBzbGlkZSBjaGFuZ2Ug
aXMgcmFpc2VkIGF1dG9tYXRpY2FsbHksIHNsaWRlcyBhcmUgYWx3YXlzIHNsaWRpbmcgdG8gcmln
aHQgKG9mZnNldCA9PSAxKS4NCiAgICAgKiBJZiB1c2VyIHJhaXNlcyBzbGlkZXMgY2hhbmdlLCBz
bGlkZXMgYXJlIHNsaWRpbmc6DQogICAgICogLSB0byBsZWZ0LCBpZiBvZmZzZXQgaXMgZ3JlYXRl
ciB0aGFuIDAgKHNsaWRlIHdpdGggaGlnaGVyIGluZGV4IHdpbGwgYmUgc2hvd24gb3IgdXNlciBj
bGlja3Mgb24gJ25leHQnIG5hdmlnYXRpb24gaXRlbSksDQogICAgICogLSB0byByaWdodCwgaWYg
b2Zmc2V0IGlzIGxvd2VyIHRoYW4gMCAoc2xpZGUgd2l0aCBsb3dlciBpbmRleCB3aWxsIGJlIHNo
b3duIG9yIHVzZXIgY2xpY2tzIG9uICdwcmV2JyBuYXZpZ2F0aW9uIGl0ZW0pLg0KICAgICAqIEBj
b25zdHJ1Y3Rvcg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNp
dGlvbigpIHt9DQogICAgU2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uLnByb3RvdHlwZSA9IG5l
dyBUcmFuc2l0aW9uKCk7DQogICAgU2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uLmNvbnN0cnVj
dG9yID0gU2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uOw0KICAgIC8qKg0KICAgICAqIEBtZW1i
ZXIgU2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uDQogICAgICovDQogICAgU2xpZGVIb3Jpem9u
dGFsbHlUcmFuc2l0aW9uLnByb3RvdHlwZS5vbkFuaW1hdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24o
c2V0dGluZ3MsICRwYXJlbnQpIHsNCiAgICAgICAgc2V0dGluZ3MuJGN1cnJlbnRTbGlkZS5oaWRl
KCk7DQogICAgICAgIHNldHRpbmdzLiRuZXh0U2xpZGUuY3NzKHsNCiAgICAgICAgICAgICdwb3Np
dGlvbic6ICcnLA0KICAgICAgICAgICAgJ3RvcCc6ICcnLA0KICAgICAgICAgICAgJ2xlZnQnOiAn
Jw0KICAgICAgICB9KTsNCg0KICAgICAgICAkcGFyZW50LmNzcygnbWFyZ2luLWxlZnQnLCAnJyk7
DQoNCiAgICAgICAgc2V0dGluZ3MuY2FsbGJhY2soKTsNCiAgICB9Ow0KICAgIC8qKg0KICAgICAq
IEBtZW1iZXIgU2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uDQogICAgICovDQogICAgU2xpZGVI
b3Jpem9udGFsbHlUcmFuc2l0aW9uLnByb3RvdHlwZS5wZXJmb3JtID0gZnVuY3Rpb24oc2V0dGlu
Z3MpIHsNCiAgICAgICAgdmFyIGZhY3RvciA9IHRoaXMuZmFjdG9yKHNldHRpbmdzKSwNCiAgICAg
ICAgICAgIG9uQW5pbWF0aW9uQ29tcGxldGUgPSB0aGlzLm9uQW5pbWF0aW9uQ29tcGxldGUsDQog
ICAgICAgICAgICB3aWR0aCA9IHNldHRpbmdzLiRjdXJyZW50U2xpZGUud2lkdGgoKSwNCiAgICAg
ICAgICAgICRwYXJlbnQgPSBzZXR0aW5ncy4kc2xpZGVzLnBhcmVudCgpOw0KDQogICAgICAgIHNl
dHRpbmdzLiRuZXh0U2xpZGUuY3NzKHsNCiAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0
ZScsDQogICAgICAgICAgICAndG9wJzogJzBweCcsDQogICAgICAgICAgICAnbGVmdCc6IGZhY3Rv
ciAqIHdpZHRoDQogICAgICAgIH0pOw0KICAgICAgICBzZXR0aW5ncy4kbmV4dFNsaWRlLnNob3co
KTsNCg0KICAgICAgICAkcGFyZW50LmFuaW1hdGUoew0KICAgICAgICAgICAgJ21hcmdpbi1sZWZ0
JzogLWZhY3RvciAqIHdpZHRoDQogICAgICAgIH0sIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAg
b25BbmltYXRpb25Db21wbGV0ZShzZXR0aW5ncywgJHBhcmVudCk7DQogICAgICAgIH0pOw0KICAg
IH07DQogICAgLyoqDQogICAgICogRW5kIG9mIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbiBj
bGFzcw0KICAgICAqLw0KICAgIHB1Yi5TbGlkZUhvcml6b250YWxseVRyYW5zaXRpb24gPSBTbGlk
ZUhvcml6b250YWxseVRyYW5zaXRpb247DQoNCiAgICAvKioNCiAgICAgKiBTbGlkZVZlcnRpY2Fs
bHlUcmFuc2l0aW9uIGNsYXNzIGNoYW5nZXMgc2xpZGVzIGJ5IHNsaWRpbmcgdGhlbSB2ZXJ0aWNh
bGx5Lg0KICAgICAqIFRoaXMgY2xhc3MgY2FuIGJlIHJlbW92ZWQgaWYgdGhpcyBlZmZlY3QgaXMg
bm90IHVzZWQuDQogICAgICogSWYgb2Zmc2V0IChkaWZmZXJlbmNlIGJldHdlZW4gaW5kZXggb2Yg
Y3VycmVudGx5IGRpc3BsYXllZCBzbGlkZSBhbmQgaW5kZXggb2Ygc2xpZGUgdGhhdCB3aWxsIGJl
IHNob3duKQ0KICAgICAqIGlzIGdyZWF0ZXIgdGhhbiAwLCBzbGlkZXMgYXJlIHNsaWRpbmcgZnJv
bSB1cCB0byBkb3duLiBPdGhlcndpc2UgKG9mZnNldCBpcyBsb3dlciB0aGFuIDApLCBzbGlkZXMg
YXJlIHNsaWRpbmcNCiAgICAgKiBmcm9tIGRvd24gdG8gdXAuDQogICAgICogV2hlbiBzbGlkZSBj
aGFuZ2UgaXMgcmFpc2VkIGF1dG9tYXRpY2FsbHksIHNsaWRlcyBhcmUgYWx3YXlzIHNsaWRpbmcg
ZnJvbSB1cCB0byBkb3duIChvZmZzZXQgPT0gMSkuDQogICAgICogSWYgdXNlciByYWlzZXMgc2xp
ZGVzIGNoYW5nZSwgc2xpZGVzIGFyZSBzbGlkaW5nOg0KICAgICAqIC0gZnJvbSB1cCB0byBkb3du
LCBpZiBvZmZzZXQgaXMgZ3JlYXRlciB0aGFuIDAgKHNsaWRlIHdpdGggaGlnaGVyIGluZGV4IHdp
bGwgYmUgc2hvd24gb3IgdXNlciBjbGlja3Mgb24gJ25leHQnIG5hdmlnYXRpb24gaXRlbSksDQog
ICAgICogLSBmcm9tIGRvd24gdG8gdXAsIGlmIG9mZnNldCBpcyBsb3dlciB0aGFuIDAgKHNsaWRl
IHdpdGggbG93ZXIgaW5kZXggd2lsbCBiZSBzaG93biBvciB1c2VyIGNsaWNrcyBvbiAncHJldicg
bmF2aWdhdGlvbiBpdGVtKS4NCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5j
dGlvbiBTbGlkZVZlcnRpY2FsbHlUcmFuc2l0aW9uKCkge30NCiAgICBTbGlkZVZlcnRpY2FsbHlU
cmFuc2l0aW9uLnByb3RvdHlwZSA9IG5ldyBUcmFuc2l0aW9uKCk7DQogICAgU2xpZGVWZXJ0aWNh
bGx5VHJhbnNpdGlvbi5jb25zdHJ1Y3RvciA9IFNsaWRlVmVydGljYWxseVRyYW5zaXRpb247DQog
ICAgLyoqDQogICAgICogQG1lbWJlciBTbGlkZVZlcnRpY2FsbHlUcmFuc2l0aW9uDQogICAgICov
DQogICAgU2xpZGVWZXJ0aWNhbGx5VHJhbnNpdGlvbi5wcm90b3R5cGUub25BbmltYXRpb25Db21w
bGV0ZSA9IGZ1bmN0aW9uKHNldHRpbmdzLCAkcGFyZW50KSB7DQogICAgICAgIHNldHRpbmdzLiRj
dXJyZW50U2xpZGUuaGlkZSgpOw0KICAgICAgICBzZXR0aW5ncy4kbmV4dFNsaWRlLmNzcyh7DQog
ICAgICAgICAgICAncG9zaXRpb24nOiAnJywNCiAgICAgICAgICAgICd0b3AnOiAnJywNCiAgICAg
ICAgICAgICdsZWZ0JzogJycNCiAgICAgICAgfSk7DQoNCiAgICAgICAgJHBhcmVudC5jc3MoJ21h
cmdpbi10b3AnLCAnJyk7DQoNCiAgICAgICAgc2V0dGluZ3MuY2FsbGJhY2soKTsNCiAgICB9Ow0K
ICAgIC8qKg0KICAgICAqIEBtZW1iZXIgU2xpZGVWZXJ0aWNhbGx5VHJhbnNpdGlvbg0KICAgICAq
Lw0KICAgIFNsaWRlVmVydGljYWxseVRyYW5zaXRpb24ucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5j
dGlvbihzZXR0aW5ncykgew0KICAgICAgICB2YXIgZmFjdG9yID0gdGhpcy5mYWN0b3Ioc2V0dGlu
Z3MpLA0KICAgICAgICAgICAgb25BbmltYXRpb25Db21wbGV0ZSA9IHRoaXMub25BbmltYXRpb25D
b21wbGV0ZSwNCiAgICAgICAgICAgIGhlaWdodCA9IHNldHRpbmdzLiRjdXJyZW50U2xpZGUuaGVp
Z2h0KCksDQogICAgICAgICAgICAkcGFyZW50ID0gc2V0dGluZ3MuJHNsaWRlcy5wYXJlbnQoKTsN
Cg0KICAgICAgICBzZXR0aW5ncy4kbmV4dFNsaWRlLmNzcyh7DQogICAgICAgICAgICAncG9zaXRp
b24nOiAnYWJzb2x1dGUnLA0KICAgICAgICAgICAgJ3RvcCc6IC1mYWN0b3IgKiBoZWlnaHQsDQog
ICAgICAgICAgICAnbGVmdCc6ICcwcHgnDQogICAgICAgIH0pOw0KICAgICAgICBzZXR0aW5ncy4k
bmV4dFNsaWRlLnNob3coKTsNCg0KICAgICAgICAkcGFyZW50LmFuaW1hdGUoew0KICAgICAgICAg
ICAgJ21hcmdpbi10b3AnOiBmYWN0b3IgKiBoZWlnaHQNCiAgICAgICAgfSwgZnVuY3Rpb24oKSB7
DQogICAgICAgICAgICBvbkFuaW1hdGlvbkNvbXBsZXRlKHNldHRpbmdzLCAkcGFyZW50KTsNCiAg
ICAgICAgfSk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBTbGlkZVZlcnRpY2FsbHlUcmFuc2l0
aW9uIGNsYXNzDQogICAgICovDQogICAgcHViLlNsaWRlVmVydGljYWxseVRyYW5zaXRpb24gPSBT
bGlkZVZlcnRpY2FsbHlUcmFuc2l0aW9uOw0KDQogICAgcmV0dXJuIHB1YjsNCn0oalF1ZXJ5KSk7
DQovKioNCiAqIGVuZCBvZiBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zIG1vZHVs
ZS4NCiAqLw0KDQovKioNCiAqIFhBQ29udGV4dA0KICoNCiAqIFhBLmNvbXBvbmVudC5jYXJvdXNl
bHMuSW5kaWNhdG9yVmlld3MgbW9kdWxlLg0KICoNCiAqIEV4cG9zZXMgVmlldyBjbGFzcywgd2hp
Y2ggaXMgYSBiYXNlIGNsYXNzIG9mIGFsbCAndGltZSBpbmRpY2F0b3InIHZpZXdzIHVzZWQgYnkg
Y2Fyb3VzZWxzIChAc2VlIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMsIEBzZWUgVmlldykuDQogKiBB
bHNvIGV4cG9zZXMgaW1wbGVtZW50YXRpb24gb2YgdGhlc2UgJ3RpbWUgaW5kaWNhdG9yJyB2aWV3
czoNCiAqIC0gUHJvZ3Jlc3NCYXJWaWV3IC0gc2hvd3MgdGhlIHByb2dyZXNzIG9mIHRpbWUsIHRo
YXQgbG9va3MgbGlrZSBhIHByb2dyZXNzIGJhciwNCiAqIC0gUm90YXRvclZpZXcgLSBzaG93cyB0
aGUgcHJvZ3Jlc3Mgb2YgdGltZSB3aXRoIHRoZSBmaWxsaW5nIHVwIHJpbmcuDQogKiBDYXJvdXNl
bCB0YWtlcyB0aGUgY2xhc3MgY29uc3RydWN0b3IgYnkgbmFtZSBmcm9tIHRoaXMgbW9kdWxlIChp
dCBpcyBnaXZlbiBpbiBvcHRpb25zIG9iamVjdCBvZiBjYXJvdXNlbDsgQHNlZSBYQS5jb21wb25l
bnQuY2Fyb3VzZWxzKS4NCiAqIElmIHRoZXJlIGlzIGEgbmVlZCB0byBpbXBsZW1lbnQgdGhlIG5l
dyAndGltZSBpbmRpY2F0b3InIHZpZXcsIGNyZWF0ZSBhIG5ldyBjbGFzcywNCiAqIGJ5IGluaGVy
aXRpbmcgZnJvbSBWaWV3IGNsYXNzIGFuZCBhZGQgaXQgdG8gdGhpcyBtb2R1bGUuIER1cmluZyBp
bXBsZW1lbnRhdGlvbiBvZiBhIG5ldyAndGltZSBpbmRpY2F0b3InDQogKiB2aWV3IHRoZSBYQS5j
b21wb25lbnQuY2Fyb3VzZWxzLkluZGljYXRvcnNWaWV3LlRvb2xzIG5hbWVzcGFjZSBtYXkgYmUg
dXNlZnVsbC4gSXQgY29udGFpbnM6DQogKiAtIGlzQ3NzU3VwcG9ydGVkKHByb3BzKSBmdW5jdGlv
biwgd2hpY2ggY2hlY2tzIGlmIGFueSBvZiBDU1MgcHJvcGVydGllcyBpcyBzdXBwb3J0ZWQgKHBy
b3BzIC0gYXJyYXkgb2YgcHJvcGVydGllcyksDQogKiAtIGlzVHJhbnNmb3JtU3VwcG9ydGVkKCkg
ZnVuY3Rpb24sIHdoaWNoIGNoZWNrcyBpZiBDU1MgMyAndHJhbnNmb3JtJyBpcyBzdXBwb3J0ZWQu
DQogKg0KICogRXhhbXBsZSB2aWV3IGltcGxlbWVudGF0aW9uIChvcGFjaXR5IGluY3JlYXNlcyB3
aXRoIGEgcHJvZ3Jlc3Mgb2YgdGhlIHRpbWUpOg0KICogKGZ1bmN0aW9uKCkgew0KICogICAgIHZh
ciBWaWV3ID0gWEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3cy5WaWV3Ow0KICoN
CiAqICAgICBmdW5jdGlvbiBTYW1wbGVWaWV3IChzZWxlY3Rvciwgb3B0aW9ucykgew0KICogICAg
ICAgICAvL2Jhc2UgY29uc3RydWN0b3IgaGF2ZSB0byBiZSBjYWxsZWQNCiAqICAgICAgICAgVmll
dy5jYWxsKHRoaXMsIHNlbGVjdG9yKTsNCiAqICAgICB9DQogKg0KICogICAgIFNhbXBsZVZpZXcu
cHJvdG90eXBlID0gbmV3IFZpZXcoKTsNCiAqICAgICBTYW1wbGVWaWV3LmNvbnN0cnVjdG9yID0g
U2FtcGxlVmlldzsNCiAqDQogKiAgICAgU2FtcGxlVmlldy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0
aW9uICh0aW1lb3V0KSB7DQogKiAgICAgICAgIC8vYmFzZSBtZXRob2QgaGF2ZSB0byBiZSBjYWxs
ZWQNCiAqICAgICAgICAgVmlldy5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsIHRpbWVvdXQpOw0K
ICoNCiAqICAgICAgICAgLy9pbml0aWFsaXphdGlvbiBjb2RlIC0gbm90IG5lZWRlZCBpbiB0aGlz
IGV4YW1wbGUNCiAqICAgICB9Ow0KICoNCiAqICAgICBTYW1wbGVWaWV3LnByb3RvdHlwZS5yZXNl
dCA9IGZ1bmN0aW9uICgpIHsNCiAqICAgICAgICAgLy9iYXNlIG1ldGhvZCBoYXZlIHRvIGJlIGNh
bGxlZA0KICogICAgICAgICBWaWV3LnByb3RvdHlwZS5yZXNldC5jYWxsKHRoaXMpOw0KICoNCiAq
ICAgICAgICAgLy9yZXNldGluZyAndGltZSBpbmRpY2F0b3InIHZpZXcNCiAqICAgICAgICAgdGhp
cy4kaW5kaWNhdG9yLnN0b3AodHJ1ZSk7DQogKiAgICAgICAgIHRoaXMuJGluZGljYXRvci5jc3Mo
J29wYWNpdHknLCAwKTsNCiAqICAgICB9Ow0KICoNCiAqICAgICBTYW1wbGVWaWV3LnByb3RvdHlw
ZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHsNCiAqICAgICAgICAgLy9zdG9waW5nICd0aW1lIGluZGlj
YXRvcicgdmlldyBhbmltYXRpb24NCiAqICAgICAgICAgdGhpcy4kaW5kaWNhdG9yLnN0b3AodHJ1
ZSk7DQogKiAgICAgfTsNCiAqDQogKiAgICAgU2FtcGxlVmlldy5wcm90b3R5cGUucGxheSA9IGZ1
bmN0aW9uICgpIHsNCiAqICAgICAgICAgLy9zdGFydGluZy9yZXN1bWluZyAndGltZSBpbmRpY2F0
b3InIHZpZXcgYW5pbWF0aW9uDQogKiAgICAgICAgIHRoaXMuJGluZGljYXRvci5hbmltYXRlKHsN
CiAqICAgICAgICAgICAgICdvcGFjaXR5JzogMQ0KICogICAgICAgICB9LCB0aGlzLnRpbWVvdXQg
LSB0aGlzLnRpbWVFbGFwc2VkLCAnbGluZWFyJyk7DQogKiAgICAgfTsNCiAqDQogKiAgICAgWEEu
Y29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3cy5TYW1wbGVWaWV3ID0gU2FtcGxlVmll
dzsNCiAqIH0oKSk7DQogKg0KICovDQpYQS5jb21wb25lbnQuY2Fyb3VzZWxzLkluZGljYXRvclZp
ZXdzID0gKGZ1bmN0aW9uKCQpIHsNCiAgICB2YXIgcHViID0ge30sDQogICAgICAgIHN1cHBvcnRF
bGVtZW50U3R5bGUgPSBudWxsOw0KDQogICAgLyoqDQogICAgICogQ2hlY2tzIGlmIGFueSBvZiBD
U1MgcHJvcGVydGllcyBpcyBzdXBwb3J0ZWQuDQogICAgICoNCiAgICAgKiBAcGFyYW0ge0FycmF5
fSBwcm9wcyAgICAgYXJyYXkgb2YgcHJvcGVydGllcyB0byBiZSBjaGVja2VkDQogICAgICogQHJl
dHVybiB0cnVlIGlmIGFueSBvZiBDU1MgcHJvcGVydGllcyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90
aGVyd2lzZQ0KICAgICAqIEB0eXBlIEJvb2xlYW4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiBpc0Nz
c1N1cHBvcnRlZChwcm9wcykgew0KICAgICAgICB2YXIgaSwNCiAgICAgICAgICAgIGlzU3VwcG9y
dGVkID0gZmFsc2U7DQoNCiAgICAgICAgaWYgKHN1cHBvcnRFbGVtZW50U3R5bGUgPT09IG51bGwp
IHsNCiAgICAgICAgICAgIHN1cHBvcnRFbGVtZW50U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVt
ZW50KCdzdXBwb3J0RWxlbWVudCcpLnN0eWxlOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yIChp
ID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoc3VwcG9ydEVs
ZW1lbnRTdHlsZVtwcm9wc1tpXV0gIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIGlz
U3VwcG9ydGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBpc1N1cHBvcnRlZDsNCiAgICB9DQoNCiAgICAv
KioNCiAgICAgKiBDaGVja3MgaWYgQ1NTIDMgJ3RyYW5zZm9ybScgaXMgc3VwcG9ydGVkLg0KICAg
ICAqDQogICAgICogQHJldHVybiB0cnVlIGlmIENTUyAzICd0cmFuc2Zvcm0nIGlzIHN1cHBvcnRl
ZCwgZmFsc2Ugb3RoZXJ3aXNlDQogICAgICogQHR5cGUgQm9vbGVhbg0KICAgICAqLw0KICAgIGZ1
bmN0aW9uIGlzVHJhbnNmb3JtU3VwcG9ydGVkKCkgew0KICAgICAgICByZXR1cm4gaXNDc3NTdXBw
b3J0ZWQoWyd0cmFuc2Zvcm1Qcm9wZXJ0eScsICdXZWJraXRUcmFuc2Zvcm0nLCAnTW96VHJhbnNm
b3JtJywgJ09UcmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nXSk7DQogICAgfQ0KDQogICAgLyoqDQog
ICAgICogWEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3cy5Ub29scyBuYW1lc3Bh
Y2UNCiAgICAgKg0KICAgICBUaGlzIG5hbWVzcGFjZSBjYW4gYmUgcmVtb3ZlZCBpZiBSb3RhdG9y
VmlldyBjbGFzcyBpcyBub3QgdXNlZCAoQHNlZSBSb3RhdG9yVmlldykNCiAgICAgKi8NCiAgICBw
dWIuVG9vbHMgPSB7fTsNCiAgICBwdWIuVG9vbHMuaXNDc3NTdXBwb3J0ZWQgPSBpc0Nzc1N1cHBv
cnRlZDsNCiAgICBwdWIuVG9vbHMuaXNUcmFuc2Zvcm1TdXBwb3J0ZWQgPSBpc1RyYW5zZm9ybVN1
cHBvcnRlZDsNCiAgICAvKioNCiAgICAgKiBFbmQgb2YgbmFtZXNwYWNlDQogICAgICovDQoNCiAg
ICAvKioNCiAgICAgKiBWaWV3IGNsYXNzIGlzIGEgYmFzZSBjbGFzcyBvZiBhbGwgJ3RpbWUgaW5k
aWNhdG9yJyB2aWV3cw0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7U3RyaW5n
fSBzZWxlY3RvciBhIHNlbGVjdG9yIHVzZWQgZm9yIHNlYXJjaGluZw0KICAgICAqIEBwYXJhbSB7
T2JqZWN0fSBvcHRpb25zICAgVmlldyBvcHRpb25zIG9iamVjdA0KICAgICAqLw0KICAgIC8qIGVz
bGludC1kaXNhYmxlICovDQogICAgZnVuY3Rpb24gVmlldyhzZWxlY3Rvciwgb3B0aW9ucykgew0K
ICAgICAgICAvKioNCiAgICAgICAgICogQSBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgZWxlbWVu
dCwgd2hpY2ggd2lsbCBiZSBhbmltYXRlZCB0byBzaG93IHBvZ3Jlc3Mgb2YgdGhlIHRpbWUuDQog
ICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgVmlldw0KICAgICAgICAgKi8NCg0KICAgICAg
ICB0aGlzLiRpbmRpY2F0b3IgPSAkKHNlbGVjdG9yKTsNCiAgICB9DQogICAgLyogZXNsaW50LWVu
YWJsZSAqLw0KICAgIC8qKg0KICAgICAqIEluaXRpYWxpemVzIHRoZSB2aWV3Lg0KICAgICAqDQog
ICAgICogQG1lbWJlciBWaWV3aW9uDQogICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXQgICBh
IHRpbWVvdXQgdG8gdGhlIGVuZCBvZiB3aG9sZSBpbmRpY2F0b3IgYW5pbWF0aW9uDQogICAgICov
DQogICAgVmlldy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsNCiAgICAgICAg
dGhpcy50aW1lRWxhcHNlZCA9IDA7DQogICAgICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXQ7DQog
ICAgfTsNCiAgICAvKioNCiAgICAgKiBSZXNldHMgdGhlIHZpZXcNCiAgICAgKg0KICAgICAqIEBt
ZW1iZXIgVmlldw0KICAgICAqLw0KICAgIFZpZXcucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24o
KSB7DQogICAgICAgIHRoaXMudGltZUVsYXBzZWQgPSAwOw0KICAgIH07DQogICAgLyoqDQogICAg
ICogU3RhcnRzL1JlbmV3cyB0aGUgdmlldyBhbmltYXRpb24uDQogICAgICoNCiAgICAgKiBAbWVt
YmVyIFZpZXcNCiAgICAgKi8NCiAgICBWaWV3LnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24oKSB7
fTsNCiAgICAvKioNCiAgICAgKiBQYXVzZXMgdGhlIHZpZXcgYW5pbWF0aW9uLg0KICAgICAqDQog
ICAgICogQG1lbWJlciBWaWV3DQogICAgICovDQogICAgVmlldy5wcm90b3R5cGUucGF1c2UgPSBm
dW5jdGlvbigpIHt9Ow0KICAgIC8qKg0KICAgICAqIFVwZGF0ZXMgdGhlIHRpbWUgdGhhdCBlbGFw
c2VkIHNpbmNlIGFuaW1hdGlvbiBiZWdpbi4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgVmlldw0K
ICAgICAqLw0KICAgIFZpZXcucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKHRpbWVFbGFwc2Vk
KSB7DQogICAgICAgIHRoaXMudGltZUVsYXBzZWQgPSB0aW1lRWxhcHNlZDsNCiAgICB9Ow0KICAg
IC8qKg0KICAgICAqIGVuZCBvZiBWaWV3IGNsYXNzDQogICAgICovDQogICAgcHViLlZpZXcgPSBW
aWV3Ow0KDQogICAgLyoqDQogICAgICogUHJvZ3Jlc3NCYXJWaWV3IGNsYXNzIHByb3ZpZGVzIGEg
bG9naWMgZm9yIGFuaW1hdGUgYSAndGltZSBpbmRpY2F0b3InLA0KICAgICAqIHRoYXQgbG9va3Mg
bGlrZSBwcm9ncmVzcyBiYXIuDQogICAgICoNCiAgICAgKiBPcHRpb25zIG9iamVjdDoNCiAgICAg
KiB7DQogICAgICogICAgICdvcGFjaXR5JzogTnVtYmVyIHZhbHVlIC8vYmV0d2VlbiAwIGFuZCAx
OyBkZWZhdWx0IGlzIDAuOA0KICAgICAqIH0NCiAgICAgKg0KICAgICAqIFRoaXMgY2xhc3MgY2Fu
IGJlIHJlbW92ZWQgaWYgdGhpcyBraW5kIG9mIHZpZXcgaXMgbm90IHVzZWQuDQogICAgICoNCiAg
ICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3IgYSBzZWxl
Y3RvciB1c2VkIGZvciBzZWFyY2hpbmcNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAg
IFZpZXcgb3B0aW9ucyBvYmplY3QNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBQcm9ncmVzc0JhclZp
ZXcoc2VsZWN0b3IsIG9wdGlvbnMpIHsNCiAgICAgICAgVmlldy5jYWxsKHRoaXMsIHNlbGVjdG9y
KTsNCg0KICAgICAgICB2YXIgZGVmYXVsdHMgPSB7DQogICAgICAgICAgICAnb3BhY2l0eSc6IDAu
OA0KICAgICAgICB9Ow0KDQogICAgICAgIHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVlLCB7
fSwgZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICAgIHRoaXMuJGNvbnRhaW5lciA9IHRoaXMu
JGluZGljYXRvcjsNCiAgICAgICAgdGhpcy4kaW5kaWNhdG9yID0gdGhpcy4kaW5kaWNhdG9yLmZp
bmQoJ2RpdicpOw0KICAgIH0NCiAgICBQcm9ncmVzc0JhclZpZXcucHJvdG90eXBlID0gbmV3IFZp
ZXcoKTsNCiAgICBQcm9ncmVzc0JhclZpZXcuY29uc3RydWN0b3IgPSBQcm9ncmVzc0JhclZpZXc7
DQogICAgLyoqDQogICAgICogQG1lbWJlciBQcm9ncmVzc0JhclZpZXcNCiAgICAgKi8NCiAgICBQ
cm9ncmVzc0JhclZpZXcucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbih0aW1lb3V0KSB7DQogICAg
ICAgIFZpZXcucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLCB0aW1lb3V0KTsNCg0KICAgICAgICB2
YXIgb3BhY2l0eSA9IHRoaXMuc2V0dGluZ3Mub3BhY2l0eTsNCiAgICAgICAgdGhpcy4kY29udGFp
bmVyLmNzcygnb3BhY2l0eScsIG9wYWNpdHkpOw0KICAgICAgICB0aGlzLiRpbmRpY2F0b3IuY3Nz
KCdvcGFjaXR5Jywgb3BhY2l0eSk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBAbWVtYmVyIFBy
b2dyZXNzQmFyVmlldw0KICAgICAqLw0KICAgIFByb2dyZXNzQmFyVmlldy5wcm90b3R5cGUucmVz
ZXQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgVmlldy5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlz
KTsNCg0KICAgICAgICB0aGlzLiRpbmRpY2F0b3Iuc3RvcCh0cnVlKTsNCiAgICAgICAgdGhpcy4k
aW5kaWNhdG9yLmNzcygnd2lkdGgnLCAnMHB4Jyk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBA
bWVtYmVyIFByb2dyZXNzQmFyVmlldw0KICAgICAqLw0KICAgIFByb2dyZXNzQmFyVmlldy5wcm90
b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy4kaW5kaWNhdG9yLnN0b3Ao
dHJ1ZSk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBAbWVtYmVyIFByb2dyZXNzQmFyVmlldw0K
ICAgICAqLw0KICAgIFByb2dyZXNzQmFyVmlldy5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKCkg
ew0KICAgICAgICB0aGlzLiRpbmRpY2F0b3IuYW5pbWF0ZSh7DQogICAgICAgICAgICAnd2lkdGgn
OiAnMTAwJScNCiAgICAgICAgfSwgdGhpcy50aW1lb3V0IC0gdGhpcy50aW1lRWxhcHNlZCwgJ2xp
bmVhcicpOw0KICAgIH07DQogICAgLyoqDQogICAgICogZW5kIG9mIFByb2dyZXNzQmFyVmlldyBj
bGFzcw0KICAgICAqLw0KICAgIHB1Yi5Qcm9ncmVzc0JhclZpZXcgPSBQcm9ncmVzc0JhclZpZXc7
DQoNCiAgICAvKioNCiAgICAgKiBSb3RhdG9yVmlldyBjbGFzcyBwcm92aWRlcyBhIGxvZ2ljIGZv
ciBhbmltYXRlIGEgJ3RpbWUgaW5kaWNhdG9yJywNCiAgICAgKiB0aGF0IHNob3dzIHRoZSBwcm9n
cmVzcyBvZiB0aW1lIHdpdGggdGhlIGZpbGxpbmcgdXAgcmluZw0KICAgICAqDQogICAgICogT3B0
aW9ucyBvYmplY3Q6DQogICAgICogew0KICAgICAqICAgICAnb3BhY2l0eSc6IE51bWJlciB2YWx1
ZSAvL2JldHdlZW4gMCBhbmQgMTsgZGVmYXVsdCBpcyAwLjUNCiAgICAgKiB9DQogICAgICoNCiAg
ICAgKiBUaGlzIGNsYXNzIGNhbiBiZSByZW1vdmVkIGlmIHRoaXMga2luZCBvZiB2aWV3IGlzIG5v
dCB1c2VkLg0KICAgICAqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtTdHJp
bmd9IHNlbGVjdG9yIGEgc2VsZWN0b3IgdXNlZCBmb3Igc2VhcmNoaW5nDQogICAgICogQHBhcmFt
IHtPYmplY3R9IG9wdGlvbnMgICBWaWV3IG9wdGlvbnMgb2JqZWN0DQogICAgICovDQogICAgZnVu
Y3Rpb24gUm90YXRvclZpZXcoc2VsZWN0b3IsIG9wdGlvbnMpIHsNCiAgICAgICAgVmlldy5jYWxs
KHRoaXMsIHNlbGVjdG9yKTsNCg0KICAgICAgICB2YXIgZGVmYXVsdHMgPSB7DQogICAgICAgICAg
ICAnb3BhY2l0eSc6IDAuNQ0KICAgICAgICB9Ow0KDQogICAgICAgIHRoaXMuc2V0dGluZ3MgPSAk
LmV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdHMsIG9wdGlvbnMpOw0KICAgICAgICB0aGlzLiRtYXNr
ID0gdGhpcy4kaW5kaWNhdG9yLmZpbmQoJ3NwYW4ubWFzaycpLmZpcnN0KCk7DQogICAgICAgIHRo
aXMuJHJvdGF0b3IgPSB0aGlzLiRpbmRpY2F0b3IuZmluZCgnc3Bhbi5yb3RhdG9yJykuZmlyc3Qo
KTsNCg0KICAgICAgICBmdW5jdGlvbiByb3RhdGVDc3MoZGVnKSB7DQogICAgICAgICAgICB2YXIg
dmFsdWUgPSAncm90YXRlKCcgKyBkZWcgKyAnZGVnKSc7DQoNCiAgICAgICAgICAgIHJldHVybiB7
DQogICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogdmFsdWUsDQogICAgICAgICAg
ICAgICAgJy1tb3otdHJhbnNmb3JtJzogdmFsdWUsDQogICAgICAgICAgICAgICAgJy1vLXRyYW5z
Zm9ybSc6IHZhbHVlLA0KICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogdmFsdWUsDQog
ICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IHZhbHVlDQogICAgICAgICAgICB9Ow0KICAgICAg
ICB9DQoNCiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZVJvdGF0b3IoJHJvdGF0b3IsIG9wdGlvbnMp
IHsNCiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHsNCiAgICAgICAgICAgICAgICAgICAgJ2Zv
bnRTaXplJzogJzE4MHB4JywNCiAgICAgICAgICAgICAgICAgICAgJ2FuaW1hdGVPcHRpb25zJzog
ew0KICAgICAgICAgICAgICAgICAgICAgICAgJ3N0ZXAnOiBmdW5jdGlvbihub3cpIHsNCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAkcm90YXRvci5jc3Mocm90YXRlQ3NzKG5vdykpOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdlYXNpbmcn
OiAnbGluZWFyJw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAg
ICAgICAgICAgICAgICBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0cywgb3B0
aW9ucyk7DQoNCiAgICAgICAgICAgICRyb3RhdG9yLmFuaW1hdGUoew0KICAgICAgICAgICAgICAg
ICAgICAnZm9udC1zaXplJzogc2V0dGluZ3MuZm9udFNpemUNCiAgICAgICAgICAgICAgICB9LA0K
ICAgICAgICAgICAgICAgIHNldHRpbmdzLmFuaW1hdGVPcHRpb25zKTsNCiAgICAgICAgfQ0KDQog
ICAgICAgIGZ1bmN0aW9uIHBoYXNlVHdvQW5pbWF0aW9uKCRtYXNrLCAkcm90YXRvciwgZHVyYXRp
b24pIHsNCiAgICAgICAgICAgICRyb3RhdG9yLmFkZENsYXNzKCdoYWxmJyk7DQogICAgICAgICAg
ICAkbWFzay5hZGRDbGFzcygnaGFsZicpOw0KDQogICAgICAgICAgICBhbmltYXRlUm90YXRvcigk
cm90YXRvciwgew0KICAgICAgICAgICAgICAgICdmb250U2l6ZSc6ICczNjBweCcsDQogICAgICAg
ICAgICAgICAgJ2FuaW1hdGVPcHRpb25zJzogew0KICAgICAgICAgICAgICAgICAgICAnZHVyYXRp
b24nOiBkdXJhdGlvbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAg
ICB9DQoNCiAgICAgICAgZnVuY3Rpb24gcGhhc2VPbmVBbmltYXRpb24oJG1hc2ssICRyb3RhdG9y
LCBkdXJhdGlvbiwgcGhhc2VUd29EdXJhdGlvbikgew0KICAgICAgICAgICAgYW5pbWF0ZVJvdGF0
b3IoJHJvdGF0b3IsIHsNCiAgICAgICAgICAgICAgICAnYW5pbWF0ZU9wdGlvbnMnOiB7DQogICAg
ICAgICAgICAgICAgICAgICdkdXJhdGlvbic6IGR1cmF0aW9uLA0KICAgICAgICAgICAgICAgICAg
ICAnY29tcGxldGUnOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBoYXNl
VHdvQW5pbWF0aW9uKCRtYXNrLCAkcm90YXRvciwgcGhhc2VUd29EdXJhdGlvbik7DQogICAgICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAg
ICAgfQ0KDQogICAgICAgIHRoaXMucmVzZXRDc3MgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAg
IHRoaXMuJHJvdGF0b3IucmVtb3ZlQ2xhc3MoJ2hhbGYnKTsNCiAgICAgICAgICAgIHRoaXMuJHJv
dGF0b3IuY3NzKHJvdGF0ZUNzcygwKSk7DQogICAgICAgICAgICB0aGlzLiRyb3RhdG9yLmNzcygn
Zm9udC1zaXplJywgJzBweCcpOw0KDQogICAgICAgICAgICB0aGlzLiRtYXNrLnJlbW92ZUNsYXNz
KCdoYWxmJyk7DQogICAgICAgIH07DQoNCiAgICAgICAgdGhpcy5wbGF5UGhhc2VPbmUgPSBmdW5j
dGlvbigpIHsNCiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMudGltZW91dCAvIDIgLSB0
aGlzLnRpbWVFbGFwc2VkOw0KICAgICAgICAgICAgcGhhc2VPbmVBbmltYXRpb24odGhpcy4kbWFz
aywgdGhpcy4kcm90YXRvciwgZHVyYXRpb24sIHRoaXMudGltZW91dCAvIDIpOw0KICAgICAgICB9
Ow0KDQogICAgICAgIHRoaXMucGxheVBoYXNlVHdvID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAg
ICB2YXIgZHVyYXRpb24gPSB0aGlzLnRpbWVvdXQgLSB0aGlzLnRpbWVFbGFwc2VkOw0KICAgICAg
ICAgICAgcGhhc2VUd29BbmltYXRpb24odGhpcy4kbWFzaywgdGhpcy4kcm90YXRvciwgZHVyYXRp
b24pOw0KICAgICAgICB9Ow0KICAgIH0NCiAgICBSb3RhdG9yVmlldy5wcm90b3R5cGUgPSBuZXcg
VmlldygpOw0KICAgIFJvdGF0b3JWaWV3LmNvbnN0cnVjdG9yID0gUm90YXRvclZpZXc7DQogICAg
LyoqDQogICAgICogQG1lbWJlciBSb3RhdG9yVmlldw0KICAgICAqLw0KICAgIFJvdGF0b3JWaWV3
LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24odGltZW91dCkgew0KICAgICAgICBWaWV3LnByb3Rv
dHlwZS5pbml0LmNhbGwodGhpcywgdGltZW91dCk7DQoNCiAgICAgICAgaWYgKGlzVHJhbnNmb3Jt
U3VwcG9ydGVkKCkpIHsNCiAgICAgICAgICAgIHRoaXMuJGluZGljYXRvci5zaG93KCk7DQogICAg
ICAgICAgICB0aGlzLiRtYXNrLmNzcygnb3BhY2l0eScsIHRoaXMuc2V0dGluZ3Mub3BhY2l0eSk7
DQogICAgICAgIH0NCiAgICB9Ow0KICAgIC8qKg0KICAgICAqIEBtZW1iZXIgUm90YXRvclZpZXcN
CiAgICAgKi8NCiAgICBSb3RhdG9yVmlldy5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHsN
CiAgICAgICAgVmlldy5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlzKTsNCg0KICAgICAgICB0aGlz
LiRyb3RhdG9yLnN0b3AodHJ1ZSk7DQogICAgICAgIHRoaXMucmVzZXRDc3MoKTsNCiAgICB9Ow0K
ICAgIC8qKg0KICAgICAqIEBtZW1iZXIgUm90YXRvclZpZXcNCiAgICAgKi8NCiAgICBSb3RhdG9y
Vmlldy5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy4kcm90YXRv
ci5zdG9wKHRydWUpOw0KICAgIH07DQogICAgLyoqDQogICAgICogQG1lbWJlciBSb3RhdG9yVmll
dw0KICAgICAqLw0KICAgIFJvdGF0b3JWaWV3LnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24oKSB7
DQogICAgICAgIHZhciBwaGFzZSA9IHRoaXMucGxheVBoYXNlT25lOw0KICAgICAgICBpZiAodGhp
cy50aW1lRWxhcHNlZCA+PSB0aGlzLnRpbWVvdXQgLyAyKSB7DQogICAgICAgICAgICBwaGFzZSA9
IHRoaXMucGxheVBoYXNlVHdvOw0KICAgICAgICB9DQoNCiAgICAgICAgcGhhc2UuY2FsbCh0aGlz
KTsNCiAgICB9Ow0KICAgIC8qKg0KICAgICAqIGVuZCBvZiBSb3RhdG9yVmlldyBjbGFzcw0KICAg
ICAqLw0KICAgIHB1Yi5Sb3RhdG9yVmlldyA9IFJvdGF0b3JWaWV3Ow0KDQogICAgcmV0dXJuIHB1
YjsNCn0oalF1ZXJ5KSk7DQovKioNCiAqIGVuZCBvZiBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLklu
ZGljYXRvclZpZXdzIG1vZHVsZS4NCiAqLw==
----field----
field: {C06867FE-9A43-4C7D-B739-48780492D06F}
name: Extension
key: extension
content-length: 2

js
----field----
field: {6F47A0A5-9C94-4B48-ABEB-42D38DEF6054}
name: Mime Type
key: mime type
content-length: 24

application/x-javascript
----field----
field: {6954B7C7-2487-423F-8600-436CB3B6DC0E}
name: Size
key: size
content-length: 5

71161
----field----
field: {06D5295C-ED2F-4A54-9BF2-26228D113318}
name: __Icon
key: __icon
content-length: 61

-/media/35F24F1601B441E68B7F83CE6717579E.ashx?h=16&thn=1&w=16
----version----
language: en
version: 1
revision: cc3af771-8608-4002-ba74-6e7dce76a5c9

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 16

20160811T135342Z
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

cc3af771-8608-4002-ba74-6e7dce76a5c9
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 16

20180103T163202Z
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 16

sitecore\unicorn
----version----
language: en
version: 2
revision: cc3af771-8608-4002-ba74-6e7dce76a5c9

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 16

20160811T135342Z
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

cc3af771-8608-4002-ba74-6e7dce76a5c9
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 16

20180103T163202Z
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 16

sitecore\unicorn
----version----
language: en
version: 3
revision: 36a0721a-8adb-412f-9af4-e18fb203dd1b

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 35

20171212T111416:636486740564940746Z
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

36a0721a-8adb-412f-9af4-e18fb203dd1b
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 16

20180103T163202Z
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 16

sitecore\unicorn
----version----
language: en
version: 4
revision: 36a0721a-8adb-412f-9af4-e18fb203dd1b

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 35

20171212T111416:636486740564940746Z
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

36a0721a-8adb-412f-9af4-e18fb203dd1b
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 16

20180103T163202Z
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 16

sitecore\unicorn
